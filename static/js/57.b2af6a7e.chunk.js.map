{"version":3,"sources":["views/user/mobility/TrainerDetail.tsx","views/user/mobility/TrainerDetail.module.scss"],"names":["TrainerDetail","props","dispatch","useDispatch","callApi","payload","callback","callApiAction","trainerId","match","params","id","console","log","query","URLSearchParams","location","search","startTime","Math","max","Number","get","history","useHistory","useState","video","setPlayer","trainer","setTrainer","follow","setFollow","data","loading","total_videos","full","page","videos","setVideos","isLoading","setIsLoading","getVideosByTrainer","method","api","config","rest","getVideoByTrainer","response","status","SUCCESS","length","useEffect","trainerById","intToString","videoParams","autoplay","sources","src","link_hls","type","poster","thumbnail","showQuality","renderVideo","className","styles","videoWrapper","description","videoPcDesc","descriptionTitle","descriptionContent","renderListVideos","videosAmount","map","trainerVideo","index","isDetail","key","onClick","goBack","trainerDetail","trainerDetailWrapper","md","xl","size","render","loadingSmall","card","cardBody","avatar","style","backgroundImage","userName","first_name","slice","last_name","footer","wrapperLeft","views","fontSize","color","interactive","content","amount_views","amount_videos","icon","unFollowTrainer","followTrainer","cursor","videoSmDesc","listVideosWrapper","onEnter","module","exports"],"mappings":"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","file":"static/js/57.b2af6a7e.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { RouteComponentProps, useHistory } from 'react-router-dom';\nimport { HBButtonSmall } from '../../../hbBaseClass';\nimport styles from './TrainerDetail.module.scss';\nimport { CCard, CCardBody, CCardFooter, CCol, CRow } from '@coreui/react';\nimport VideoPlayer from '../../../components/videoPlayer/VideoPlayer';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { useDispatch } from 'react-redux';\nimport Frame from './Frame';\nimport { loadingSmall } from '../../../extensions';\nimport { Waypoint } from 'react-waypoint';\nimport config from '../../../config';\nimport MobilityVideo from './MobilityVideo';\nimport { intToString } from '../../../utils';\nimport Tippy from '@tippyjs/react';\nimport 'tippy.js/dist/tippy.css';\n\nconst TrainerDetail: React.FC<RouteComponentProps> = (props: any) => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback: any) => dispatch(callApiAction(payload, callback));\n  let param: any = props.match.params;\n  const trainerId = param.id;\n  console.log('wer');\n  const query = new URLSearchParams(props.location.search);\n  //const videoId: any = query.get('video');\n  const startTime = Math.max(Number(query.get('time')) || 0, 0);\n  const history = useHistory();\n  const [video, setVideo] = useState<any>(null);\n  const [player, setPlayer] = useState<any>(null);\n  //const [relatedVideos, setRelatedVideos] = useState<any>({ data: [], loading: true });\n  const [trainer, setTrainer] = useState<any>(null);\n  const [follow, setFollow] = useState<any>(false);\n  const [videos, setVideos] = useState<any>({\n    data: [],\n    loading: true,\n    total_videos: 0,\n    full: false,\n    page: 0,\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const pageSize = 12;\n\n  const getTrainerById = (id: any) => {\n    setIsLoading(true);\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.trainerById(id),\n        loading: !video,\n      },\n      (response: any) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          setTrainer(data);\n          setFollow(data.follow);\n          setIsLoading(false);\n        }\n      },\n    );\n  };\n\n  const followAction = () => {\n    setFollow((follow: any) => !follow);\n    callApi(\n      {\n        method: !follow ? 'post' : 'delete',\n        api: !follow ? config.rest.followTrainer(trainerId) : config.rest.unFollowTrainer(trainerId),\n      },\n      (response: any) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n        }\n      },\n    );\n  };\n\n  const getVideosByTrainer = (page: number) => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getVideoByTrainer(trainerId, page, pageSize),\n        loading: page === 1,\n      },\n      (response: any) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          setVideos((videos: any) => {\n            return {\n              data: page === 1 ? data.videos : [...videos.data, ...data.videos],\n              full: data.videos.length < pageSize,\n              loading: false,\n              page: page,\n              total_videos: data.total_videos,\n            };\n          });\n        }\n      },\n    );\n  };\n\n  useEffect(() => {\n    getTrainerById(trainerId);\n    getVideosByTrainer(1);\n  }, [trainerId]);\n\n  const loadMoreTrainers = () => {\n    if (videos.loading || videos.full) return;\n    setVideos({ ...videos, loading: true });\n    getVideosByTrainer(videos.page + 1);\n  };\n\n  console.log('Quy', intToString(2123));\n\n  const videoParams = video\n    ? {\n        setPlayer: setPlayer,\n        autoplay: true,\n        sources: [\n          {\n            src: video?.link_hls,\n            type: 'application/x-mpegURL',\n          },\n        ],\n        poster: video?.thumbnail,\n        //setRelatedVideos: setRelatedVideos,\n        startTime,\n        showQuality: true,\n      }\n    : {};\n\n  const renderVideo = (\n    <>\n      <div className=\"hb-video mb-2\">\n        <VideoPlayer className={styles.videoWrapper} {...videoParams} />\n      </div>\n      {!!trainer?.description && (\n        <div className={styles.videoPcDesc}>\n          <div className={`hb-video-description-title ${styles.descriptionTitle}`}>Beschreibung</div>\n          <div className={`hb-video-description-content ${styles.descriptionContent}`}>{trainer?.description}</div>\n        </div>\n      )}\n    </>\n  );\n\n  const renderListVideos = (\n    <>\n      <div className={styles.videosAmount}>\n        {videos?.total_videos < 2 ? videos?.total_videos + ' ' + 'Video' : videos?.total_videos + ' ' + 'Videos'}\n      </div>\n      <CRow>\n        {videos.data.map((trainerVideo: any, index: number) => (\n          <MobilityVideo\n            {...trainerVideo}\n            className=\"MobilityView-video\"\n            isDetail\n            key={trainerVideo.id}\n            index={index}\n            setVideos={setVideos}\n          />\n        ))}\n      </CRow>\n    </>\n  );\n\n  return (\n    <>\n      <div className=\"hb-mx-20\">\n        <div className=\"d-flex justify-content-between hb-my-28\">\n          <HBButtonSmall onClick={() => history.goBack()}>\n            <i className=\"hb-icon-arrow-left hb-icon-md\" /> Zurück\n          </HBButtonSmall>\n        </div>\n      </div>\n      <div className={styles.trainerDetail}>\n        <CRow className={styles.trainerDetailWrapper}>\n          <CCol md={8} xl={8}>\n            {renderVideo}\n            {videos.page !== 0 && videos.loading && <Frame size=\"large\" render={loadingSmall} />}\n          </CCol>\n          <CCol md={4} xl={4}>\n            <CCard className={styles.card}>\n              <CCardBody className={styles.cardBody}>\n                <div className={styles.avatar} style={{ backgroundImage: `url(\"${trainer?.avatar}\")` }}></div>\n                <div className={styles.userName}>\n                  {!isLoading && (\n                    <>\n                      <p>\n                        {trainer?.first_name.length < 13\n                          ? trainer?.first_name\n                          : (trainer?.first_name || '').slice(0, 10) + '...'}\n                      </p>\n                      <p>\n                        {trainer?.last_name.length < 13\n                          ? trainer?.last_name\n                          : (trainer?.last_name || '').slice(0, 10) + '...'}\n                      </p>\n                    </>\n                  )}\n                </div>\n              </CCardBody>\n              <CCardFooter className={styles.footer}>\n                <div className={styles.wrapperLeft}>\n                  {!isLoading && (\n                    <>\n                      <div className={styles.views}>\n                        <i className=\"hb-icon-eye\" style={{ fontSize: 20, color: 'var(--violet-80)' }} />\n                        <Tippy interactive={true} content={trainer?.amount_views}>\n                          <span>{intToString(trainer?.amount_views)}</span>\n                        </Tippy>\n                      </div>\n\n                      <div className={styles.videos}>\n                        {trainer?.amount_videos < 2\n                          ? trainer?.amount_videos + ' ' + 'Video'\n                          : (trainer?.amount_videos || 0) + ' ' + 'Videos'}\n                      </div>\n                    </>\n                  )}\n                </div>\n                <div className={styles.icon} onClick={followAction}>\n                  <i\n                    className={`${follow ? 'hb-icon-heart-s' : 'hb-icon-heart-r'}`}\n                    style={{ fontSize: 20, color: 'var(--violet-80)', cursor: 'pointer' }}\n                  />\n                </div>\n              </CCardFooter>\n            </CCard>\n            {!!trainer?.description && (\n              <div className={styles.videoSmDesc}>\n                <div className={`hb-video-description-title ${styles.descriptionTitle}`}>Beschreibung</div>\n                <div className={`hb-video-description-content ${styles.descriptionContent}`}>\n                  {trainer?.description}\n                </div>\n              </div>\n            )}\n          </CCol>\n        </CRow>\n        <CRow className={styles.listVideosWrapper}>\n          <CCol md={8} xl={8}>\n            {renderListVideos}\n            <Waypoint onEnter={loadMoreTrainers} />\n          </CCol>\n        </CRow>\n      </div>\n    </>\n  );\n};\n\nexport default TrainerDetail;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"trainerDetail\":\"TrainerDetail_trainerDetail__2pVeG\",\"trainerDetailWrapper\":\"TrainerDetail_trainerDetailWrapper__25KbR\",\"videoWrapper\":\"TrainerDetail_videoWrapper__3rY3u\",\"card\":\"TrainerDetail_card__2z4c2\",\"cardBody\":\"TrainerDetail_cardBody__10E7Z\",\"footer\":\"TrainerDetail_footer__2sgUd\",\"avatar\":\"TrainerDetail_avatar__ejmWZ\",\"userName\":\"TrainerDetail_userName__2a9Hg\",\"wrapperLeft\":\"TrainerDetail_wrapperLeft__2s7xF\",\"views\":\"TrainerDetail_views__TIpbP\",\"videos\":\"TrainerDetail_videos__2v5M8\",\"icon\":\"TrainerDetail_icon__3Zigk\",\"videosAmount\":\"TrainerDetail_videosAmount__3rCmv\",\"descriptionTitle\":\"TrainerDetail_descriptionTitle__ZYI9c\",\"descriptionContent\":\"TrainerDetail_descriptionContent__2M8dc\",\"videoPcDesc\":\"TrainerDetail_videoPcDesc__3b5IT\",\"videoSmDesc\":\"TrainerDetail_videoSmDesc__2p2gK\",\"listVideosWrapper\":\"TrainerDetail_listVideosWrapper__3Vyun\"};"],"sourceRoot":""}