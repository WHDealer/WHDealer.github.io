{"version":3,"sources":["views/user/consulting/SearchFriend.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["SearchFriend","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","data","loading","friend","setFriend","searchName","setSearchName","show","popupCancel","setPopupCancel","history","useHistory","popupRequestCancel","setPopupRequestCancel","changeStatus","userId","type","method","api","config","rest","addFriend","changeStatusFriend","deleteFriend","response","status","SUCCESS","newData","confirm","cancel","null","handleCancel","id","friends","push","searchParams","className","searchEmpty","callbackSearch","searchValue","getUserSearchName","searchFriend","timeoutSearch","inputStyle","width","style","padding","display","justifyContent","alignItems","zIndex","listStyle","paddingLeft","marginBottom","placeholder","to","isVisible","title","content","leftButtonText","rightButtonText","leftButtonOnPress","rightButtonOnPress","console","log","Object","keys","length","textAlign","md","marginTop","first_name","last_name","img","avatar","search","setPopUpCancel","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call"],"mappings":"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","file":"static/js/72.7f204af1.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CCol, CContainer, CHeader, CRow } from '@coreui/react';\nimport { RouteComponentProps, useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport Search from '../../../components/search/Search';\nimport FriendItem from './FriendItem';\nimport { ConfirmPopup } from '../../../components';\n\nconst SearchFriend: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [friend, setFriend] = useState<any>({ data: {}, loading: true });\n  const [searchName, setSearchName] = useState('');\n  const [popupCancel, setPopupCancel] = useState({ show: false });\n  const history = useHistory();\n  const [popupRequestCancel, setPopupRequestCancel] = useState({ show: false });\n\n  const searchFriend = (searchName: any) => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getUserSearchName(searchName),\n        loading: true,\n      },\n      (response) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          setFriend({\n            data: { ...data },\n            loading: false,\n          });\n        }\n      },\n    );\n  };\n\n  const changeStatus = (userId: any, type: any) => {\n    callApi(\n      {\n        method: type === null ? 'post' : type === 'confirm' ? 'put' : 'delete',\n        api:\n          type === null\n            ? config.rest.addFriend(userId)\n            : type === 'confirm'\n            ? config.rest.changeStatusFriend(userId)\n            : config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setFriend((friend: any) => {\n            const key: any = { confirm: 'friend', cancel: null, friend: null, null: 'cancel' };\n            let newData = { ...friend };\n            newData.data.type = key[type];\n            return newData;\n          });\n        }\n      },\n    );\n  };\n\n  const unFriend = (userId: any, page: any) => {\n    callApi(\n      {\n        method: 'delete',\n        api: config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setFriend((friends: any) => ({\n            ...friends,\n          }));\n          history.push('/consulting/add-friend');\n        }\n      },\n    );\n  };\n\n  const handleCancel = () => {\n    setPopupCancel({ show: false });\n    unFriend(friend.data.id, 1);\n  };\n\n  const handleCancelRequest = () => {\n    console.log('123');\n    setPopupRequestCancel({ show: false });\n    changeStatus(friend.data.id, friend.data.type);\n  };\n\n  const searchParams: any = {\n    className: 'header-topic--wrapper__search--selection__world',\n    searchName,\n    setSearchName,\n    searchEmpty: true,\n    callbackSearch: (searchValue: string) => searchFriend(searchValue),\n    timeoutSearch: 3000,\n    inputStyle: { width: 400 },\n  };\n\n  return (\n    <div>\n      <CContainer>\n        <div className=\"add-friend-page-wrapper\">\n          <CHeader\n            style={{ padding: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', zIndex: 1 }}\n          >\n            <h4>Search Friend</h4>\n            <div style={{ width: 650 }}>\n              <ul\n                style={{\n                  listStyle: 'none',\n                  display: 'flex',\n                  paddingLeft: 0,\n                  justifyContent: 'space-between',\n                  marginBottom: 0,\n                  alignItems: 'center',\n                }}\n              >\n                <li>\n                  <Search {...searchParams} className=\"add-friend__search\" placeholder=\"Search friend\" />\n                </li>\n                <li>\n                  <Link to=\"/consulting/add-friend\">List Friend</Link>\n                </li>\n                <li>\n                  <Link to=\"/consulting/friend-request\">Friend Request</Link>\n                </li>\n              </ul>\n            </div>\n          </CHeader>\n          <div className=\"add-friend-main-page-body\">\n            <CRow>\n              <ConfirmPopup\n                isVisible={friend.data.type === 'cancel' ? popupRequestCancel.show : popupCancel.show}\n                title=\"Cancel\"\n                content={\n                  friend.data.type === 'cancel'\n                    ? 'Are you sure you want to cancel request?'\n                    : 'Are you sure you want to unfriend?'\n                }\n                leftButtonText=\"No\"\n                rightButtonText=\"Yes\"\n                leftButtonOnPress={() =>\n                  friend.data.type === 'cancel'\n                    ? setPopupRequestCancel({ show: false })\n                    : setPopupCancel({ show: false })\n                }\n                rightButtonOnPress={() => (friend.data.type === 'cancel' ? handleCancelRequest() : handleCancel())}\n              />\n              {Object.keys(friend.data).length === 0 ? (\n                <div style={{ textAlign: 'center', width: '100%' }}>{searchName ? 'No result' : 'Search by email'}</div>\n              ) : (\n                <CCol md={6} style={{ marginTop: 15 }}>\n                  <FriendItem\n                    first_name={friend.data.first_name}\n                    last_name={friend.data.last_name}\n                    img={friend.data.avatar}\n                    id={friend.data.id}\n                    changeStatus={changeStatus}\n                    status={friend.data.type}\n                    search={true}\n                    setPopUpCancel={setPopupCancel}\n                    setPopupRequestCancel={setPopupRequestCancel}\n                  />\n                </CCol>\n              )}\n            </CRow>\n          </div>\n        </div>\n      </CContainer>\n    </div>\n  );\n};\nexport default SearchFriend;\n","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}