{"version":3,"sources":["views/user/personalInformation/Profile.tsx","views/user/personalInformation/Profile.module.scss"],"names":["CustomInput","forwardRef","ref","onClick","className","styles","iconDate","validationSchema","Yup","shape","first_name","trim","required","last_name","Profile","props","auth","useSelector","state","history","useHistory","dispatch","useDispatch","callApi","payload","callback","callApiAction","uploadRef","useRef","useState","data","setData","file_path","link","temporaryUploadLink","setTemporaryUploadLink","file","imagePreviewUrl","avatar","loading","setAvatar","isUpdate","setIsUpdate","gender","setGender","setLoading","dateOfBirth","setDateOfBirth","groupName","group_name","show","setShow","useEffect","method","api","config","rest","getProfileUser","response","status","SUCCESS","newDate","createDate","birth_date","handleClose","formRef","isValidMore","title","content","up","upCallback","current","resetForm","down","downCallback","profileWrapper","profileContainer","md","leftWrapper","userName","avatarArea","avatarUser","style","backgroundImage","avatar_thumbnail","defaultAvatar","overlay","backgroundColor","avatarLoading","color","borderWidth","size","avatarUserButtonWrapper","btnClassName","avatarUserButton","click","getUploadLink","type","id","name","display","accept","onChange","e","reader","FileReader","target","files","onload","result","fileInput","myHeaders","Headers","append","fetch","headers","body","redirect","then","text","console","log","addUserLS","updateProfile","catch","error","uploadAvatar","readAsDataURL","formContainer","marginBottom","innerRef","initialValues","enableReinitialize","validate","onSubmit","values","formatDate","phone_number","bio","editProfile","msg","messages","updateMessageFailure","newUser","errors","touched","dirty","handleChange","handleBlur","handleSubmit","isValid","isSubmitting","handleReset","setTouched","form","lastFormGroup","wrapperTitle","cardTitle","btnSubmit","wrapperBtn","bioWrapper","modalBody","modalBioTitle","mobdalBioBody","btnEdit","push","btnNurse","contentNurse","uploadDocument","iconArrowNurse","genderGroup","label","btnGender","disabled","light","formGroup","email","placeholder","autoComplete","maxLength","value","onBlur","includes","inputText","dataOfBirth","date","valueDate","valueDateDisable","moment","format","width","selected","customInput","yearDropdownItemNumber","showYearDropdown","showMonthDropdown","scrollableYearDropdown","adjustDateOnChange","withPortal","maxDate","Date","popperPlacement","phone","valueTypingExpressionsPhone","invalid","capitalizeWords","valueTypingExpressionsName","btnGroupWrap","height","marginTop","outline","module","exports"],"mappings":"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","file":"static/js/64.aee1fe6d.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect, forwardRef } from 'react';\nimport {\n  CRow,\n  CCardBody,\n  CCardHeader,\n  CCard,\n  CCol,\n  CFormGroup,\n  CForm,\n  CInvalidFeedback,\n  CInput,\n  CSpinner,\n} from '@coreui/react';\nimport config from '../../../config';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateProfile } from '../../../store/auth/actions';\nimport { addUserLS, capitalizeWords, formatDate } from '../../../utils';\nimport styles from './Profile.module.scss';\nimport { HBButton, HBButtonFull, HBButtonSmall, HBModalConfirm } from '../../../hbBaseClass';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { validate, createDate } from '../../../utils';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport moment from 'moment';\nimport { useHistory } from 'react-router-dom';\nimport { defaultAvatar } from '../../../extensions';\n\ninterface Props {\n  location: any;\n}\n\nconst CustomInput = forwardRef(({ onClick }: any, ref: any) => {\n  return (\n    <div className={styles.iconDate} onClick={onClick} ref={ref}>\n      <i className=\"hb-icon-calendar-date\"></i>\n    </div>\n  );\n});\n\nconst validationSchema = function () {\n  return Yup.object().shape({\n    first_name: Yup.string().trim().required('First Name is required'),\n    last_name: Yup.string().trim().required('Last Name is required'),\n  });\n};\n\nconst Profile: React.FC<Props> = (props) => {\n  const auth = useSelector((state: any) => state.auth);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback: any) => dispatch(callApiAction(payload, callback));\n  const uploadRef = useRef<HTMLInputElement>(null);\n  const [data, setData] = useState<any>(null);\n  const [temporaryUploadLink, setTemporaryUploadLink] = useState<any>({\n    file_path: '',\n    link: '',\n  });\n  const [avatar, setAvatar] = useState<any>({\n    file: '',\n    imagePreviewUrl: '',\n    avatar: auth?.avatar || '',\n    loading: false,\n  });\n  const [isUpdate, setIsUpdate] = useState<any>(false);\n  const [gender, setGender] = useState<number>(0);\n  const [loading, setLoading] = useState(false);\n  const [dateOfBirth, setDateOfBirth] = useState<any>(null);\n  const groupName = useSelector((state: any) => state.auth.group_name);\n  const [show, setShow] = useState(false);\n\n  // Get Profile For Nurse and User\n  const getProfile = () => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getProfileUser(),\n        loading: true,\n      },\n      (response: any) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          const newDate = createDate(data.birth_date);\n          setData({ ...data, birth_date: newDate });\n          setGender(data.gender);\n          setDateOfBirth(newDate);\n        }\n      },\n    );\n  };\n\n  // Get Link Upload S3\n  const getTemporaryUploadLink = () => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getUploadLink('image'),\n      },\n      (response: any) => {\n        if (response.status === SUCCESS) {\n          setTemporaryUploadLink(response?.data || {});\n        }\n      },\n    );\n  };\n\n  const onSubmit = (values: any) => {\n    const newDate = formatDate(dateOfBirth);\n    const body = {\n      gender,\n      phone_number: values.phone_number,\n      first_name: values.first_name.trim(),\n      last_name: values.last_name.trim(),\n      birth_date: newDate,\n      bio: values.bio,\n    };\n\n    setLoading(true);\n    callApi(\n      {\n        method: 'put',\n        api: config.rest.editProfile(),\n        body: body,\n        msg: config.messages.updateMessageFailure,\n      },\n      (response: any) => {\n        const { status } = response;\n        setLoading(false);\n        if (status === SUCCESS) {\n          setIsUpdate(false);\n          setData((data: any) => {\n            const newUser = {\n              gender,\n              phone_number: values.phone_number,\n              first_name: values.first_name.trim(),\n              last_name: values.last_name.trim(),\n              birth_date: newDate,\n            };\n            addUserLS(newUser);\n            dispatch(updateProfile(newUser));\n            return {\n              ...data,\n              ...body,\n              birth_date: dateOfBirth,\n            };\n          });\n        }\n      },\n    );\n  };\n\n  const uploadAvatar = (link: string, fileInput: any) => {\n    let myHeaders = new Headers();\n    myHeaders.append('x-amz-acl', 'public-read');\n\n    let file = fileInput;\n    avatar.loading = true;\n    const requestOptions: any = {\n      method: 'PUT',\n      headers: myHeaders,\n      body: file,\n      redirect: 'follow',\n    };\n\n    fetch(link, requestOptions)\n      .then((response) => response.text())\n      .then((response: any) => {\n        console.log(response);\n        addUserLS({ avatar: temporaryUploadLink?.avatar });\n        setAvatar((avatar: any) => {\n          return { ...avatar, loading: false };\n        });\n        dispatch(updateProfile({ avatar: temporaryUploadLink?.avatar }));\n        avatar.loading = false;\n      })\n      .catch((error) => console.log('error', error));\n  };\n\n  const onUploadAvatar = (e: any) => {\n    let reader = new FileReader();\n    let file = e.target.files[0];\n    if (!file) return;\n\n    reader.onload = () => {\n      setTemporaryUploadLink({ file_path: file });\n      setAvatar({ file: file, imagePreviewUrl: reader.result, loading: true });\n      uploadAvatar(temporaryUploadLink.link, file);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  useEffect(() => {\n    getProfile();\n  }, []);\n\n  const handleClose = () => {\n    setShow(!show);\n  };\n\n  const formRef = useRef<any>(null);\n\n  if (!data) return <div />;\n\n  const isValidMore = groupName === 'nurse' ? gender !== 3 && dateOfBirth : true;\n\n  return (\n    <>\n      <HBModalConfirm\n        show={show}\n        handleClose={handleClose}\n        title=\"Abbrechen\"\n        content=\"Sind sie sicher, dass sie Abbrechen wollen? Alle Änderungen gehen dabei verloren.\"\n        up=\"Ja, abbrechen\"\n        upCallback={() => {\n          formRef.current.resetForm();\n          setIsUpdate(false);\n          setShow(false);\n        }}\n        down=\"Weiter bearbeiten\"\n        downCallback={handleClose}\n      />\n      <div className={`wide ${styles.profileWrapper}`}>\n        <h1 className={styles.title}>Profil</h1>\n        <CRow className={styles.profileContainer}>\n          <CCol md={4}>\n            <div className={styles.leftWrapper}>\n              <div className={styles.userName}>\n                <p>{data.first_name}</p>\n                <p>{data.last_name}</p>\n              </div>\n              <div className={styles.avatarArea}>\n                <div\n                  className={styles.avatarUser}\n                  style={{\n                    backgroundImage: `url(\"${\n                      (avatar.imagePreviewUrl ? avatar.avatar || avatar.imagePreviewUrl : data.avatar_thumbnail) ||\n                      defaultAvatar\n                    }\")`,\n                  }}\n                >\n                  <div\n                    className={styles.overlay}\n                    style={{\n                      backgroundColor: avatar.loading ? '#fff4' : 'transparent',\n                    }}\n                  >\n                    <div className={styles.avatarLoading}>\n                      {avatar.loading ? (\n                        <CSpinner style={{ color: 'var(--aquamarin-100)', borderWidth: 4 }} size=\"lg\" />\n                      ) : (\n                        ''\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <HBButton\n                  className={styles.avatarUserButtonWrapper}\n                  btnClassName={styles.avatarUserButton}\n                  onClick={() => {\n                    uploadRef.current?.click();\n                    getTemporaryUploadLink();\n                  }}\n                  color=\"petrol\"\n                >\n                  Foto aktualisieren\n                </HBButton>\n                <input\n                  className=\"avatar-user--input\"\n                  type=\"file\"\n                  id=\"myFile\"\n                  name=\"filename\"\n                  ref={uploadRef}\n                  style={{ display: 'none' }}\n                  accept=\"image/x-png,image/gif,image/jpeg\"\n                  onChange={onUploadAvatar}\n                />\n              </div>\n            </div>\n          </CCol>\n          <CCol md={8}>\n            <CCard className={`hb-card ${styles.formContainer}`}>\n              <CCardBody className=\"hb-card-item\" style={{ marginBottom: 0 }}>\n                <Formik\n                  innerRef={formRef}\n                  initialValues={data}\n                  enableReinitialize={true}\n                  validate={validate(validationSchema)}\n                  onSubmit={onSubmit}\n                >\n                  {({\n                    values,\n                    errors,\n                    touched,\n                    status,\n                    dirty,\n                    handleChange,\n                    handleBlur,\n                    handleSubmit,\n                    isSubmitting,\n                    isValid,\n                    handleReset,\n                    setTouched,\n                  }) => (\n                    <CForm className={styles.form} onSubmit={handleSubmit}>\n                      <CFormGroup className={styles.lastFormGroup}>\n                        <div className={styles.wrapperTitle}>\n                          <div className={styles.cardTitle}>Persönliche Daten</div>\n                          <HBButton\n                            btnClassName={styles.btnSubmit}\n                            className={styles.wrapperBtn}\n                            onClick={() => {\n                              setIsUpdate(true);\n                              formRef.current.resetForm();\n                              setGender(data.gender);\n                              setDateOfBirth(data.birth_date);\n                            }}\n                            type=\"button\"\n                            style={{ display: isUpdate ? 'none' : 'flex' }}\n                          >\n                            Daten bearbeiten\n                          </HBButton>\n                        </div>\n                      </CFormGroup>\n\n                      {!isUpdate && (\n                        <CFormGroup className={`${styles.bioWrapper}`}>\n                          {data.bio ? (\n                            <CCard className={styles.modalBody}>\n                              <CCardHeader className={styles.modalBioTitle}>\n                                <div>Biografie</div>\n                                <i className=\"hb-icon-pentool-2\"></i>\n                              </CCardHeader>\n                              <CCardBody className={styles.mobdalBioBody}>\n                                {data.bio}\n                                <HBButton\n                                  btnClassName={styles.btnEdit}\n                                  className={styles.wrapperBtn}\n                                  onClick={() => history.push('/update-bio')}\n                                  type=\"button\"\n                                >\n                                  Bearbeiten\n                                </HBButton>\n                              </CCardBody>\n                            </CCard>\n                          ) : (\n                            <div className={styles.btnNurse} onClick={() => history.push('/update-bio')}>\n                              <div className={styles.contentNurse}>\n                                <div className={styles.uploadDocument}>\n                                  <i className=\"hb-icon-book\"></i>\n                                </div>\n                                <span>Biografie hinzufügen</span>\n                              </div>\n                              <div className={styles.iconArrowNurse}>\n                                <i className=\"hb-icon-arrow-right\"></i>\n                              </div>\n                            </div>\n                          )}\n\n                          <CInvalidFeedback>{errors.bio || ''}</CInvalidFeedback>\n                        </CFormGroup>\n                      )}\n\n                      <CFormGroup className={styles.genderGroup}>\n                        <div className={styles.label} style={{ display: data.gender === 3 ? 'none' : 'block' }}>\n                          Geschlecht{isUpdate && groupName === 'nurse' && '*'}\n                        </div>\n                        {!isUpdate ? (\n                          <HBButtonSmall\n                            disabled\n                            light\n                            type=\"button\"\n                            style={{ display: data.gender === 3 ? 'none' : 'block' }}\n                          >\n                            {data.gender === 0 ? 'Männlich' : data.gender === 1 ? 'Weiblich' : 'Andere'}\n                          </HBButtonSmall>\n                        ) : (\n                          <div className={styles.gender}>\n                            <HBButtonSmall\n                              type=\"button\"\n                              color=\"petrol\"\n                              onClick={() => setGender(1)}\n                              className={`${styles.btnGender} ${gender === 1 ? 'is-selected' : ''}`}\n                            >\n                              Weiblich\n                            </HBButtonSmall>\n                            <HBButtonSmall\n                              type=\"button\"\n                              color=\"petrol\"\n                              onClick={() => setGender(0)}\n                              className={`${styles.btnGender} ${gender === 0 ? 'is-selected' : ''}`}\n                            >\n                              Männlich\n                            </HBButtonSmall>\n                            <HBButtonSmall\n                              type=\"button\"\n                              color=\"petrol\"\n                              onClick={() => setGender(2)}\n                              className={`${styles.btnGender} ${gender === 2 ? 'is-selected' : ''}`}\n                            >\n                              Andere\n                            </HBButtonSmall>\n                          </div>\n                        )}\n                      </CFormGroup>\n\n                      <CFormGroup className={[styles.formGroup, styles.email]}>\n                        <div className={styles.label}>Email</div>\n\n                        <CInput\n                          type=\"text\"\n                          placeholder=\"E-Mail Adresse\"\n                          autoComplete=\"email\"\n                          // invalid={values.email !== '' && touched.email && !!errors.email}\n                          name=\"email\"\n                          maxLength={50}\n                          value={values.email}\n                          onBlur={handleBlur}\n                          onChange={(e: any) => {\n                            if (!e.target.value.includes(' ')) handleChange(e);\n                          }}\n                          className={styles.inputText}\n                          disabled\n                        />\n                        <CInvalidFeedback>{errors.email || ''}</CInvalidFeedback>\n                      </CFormGroup>\n                      <CFormGroup className={[styles.formGroup, styles.dataOfBirth]}>\n                        <div className={styles.label}>Geburtstag{isUpdate && groupName === 'nurse' && '*'}</div>\n                        {!isUpdate ? (\n                          <CInput\n                            type=\"text\"\n                            placeholder=\"TT.MM.JJJJ\"\n                            autoComplete=\"birth_date\"\n                            // invalid={values.birth_date !== '' && touched.birth_date && !!errors.birth_date}\n                            name=\"birth_date\"\n                            value={data.birth_date ? moment(data.birth_date).format('DD.MM.YYYY') || '' : 'TT.MM.JJJJ'}\n                            onBlur={handleBlur}\n                            onChange={(e: any) => {\n                              if (!e.target.value.includes(' ')) handleChange(e);\n                            }}\n                            className={styles.inputText}\n                            disabled\n                          />\n                        ) : (\n                          <div className={styles.date}>\n                            <div className={isUpdate ? styles.valueDate : styles.valueDateDisable}>\n                              {dateOfBirth ? moment(dateOfBirth || data.birth_date).format('DD.MM.YYYY') : 'TT.MM.JJJJ'}\n                            </div>\n                            <div style={{ width: 50 }} className={`hb-datepicker`}>\n                              <DatePicker\n                                selected={dateOfBirth}\n                                customInput={<CustomInput />}\n                                onChange={(date: any) => setDateOfBirth(date)}\n                                yearDropdownItemNumber={40}\n                                showYearDropdown\n                                showMonthDropdown\n                                scrollableYearDropdown\n                                adjustDateOnChange\n                                withPortal\n                                maxDate={new Date()}\n                                popperPlacement=\"top-end\"\n                                disabled={!isUpdate}\n                              />\n                            </div>\n                          </div>\n                        )}\n\n                        <CInvalidFeedback>{errors.birth_date || ''}</CInvalidFeedback>\n                      </CFormGroup>\n                      <CFormGroup className={[isUpdate ? styles.formGroup : '', styles.phone]}>\n                        <div className={styles.label}>Telefonnummer</div>\n                        <CInput\n                          type=\"text\"\n                          placeholder=\"Telefonnummer\"\n                          autoComplete=\"phone_number\"\n                          // invalid={values.phone_number !== '' && touched.phone_number && !!errors.phone_number}\n                          name=\"phone_number\"\n                          value={values.phone_number || ''}\n                          onBlur={handleBlur}\n                          onChange={(e: any) => {\n                            if (!e.target.value || config.validate.valueTypingExpressionsPhone(e)) handleChange(e);\n                          }}\n                          maxLength={20}\n                          className={styles.inputText}\n                          disabled={!isUpdate}\n                        />\n                        <CInvalidFeedback>{errors.phone_number || ''}</CInvalidFeedback>\n                      </CFormGroup>\n\n                      {isUpdate && (\n                        <>\n                          <CFormGroup className={styles.formGroup}>\n                            <div className={styles.label}>Vorname*</div>\n                            <CInput\n                              type=\"text\"\n                              placeholder=\"Vorname\"\n                              invalid={values.first_name.trim() !== '' && touched.first_name && !!errors.first_name}\n                              autoComplete=\"first_name\"\n                              maxLength={50}\n                              value={capitalizeWords(values.first_name || '')}\n                              onBlur={handleBlur}\n                              onChange={(e) => {\n                                if (config.validate.valueTypingExpressionsName(e)) handleChange(e);\n                              }}\n                              name=\"first_name\"\n                              className={styles.inputText}\n                              required\n                              disabled={!isUpdate}\n                            />\n\n                            <CInvalidFeedback>{errors.first_name}</CInvalidFeedback>\n                          </CFormGroup>\n                          <CFormGroup>\n                            <div className={styles.label}>Nachname*</div>\n                            <CInput\n                              type=\"text\"\n                              placeholder=\"Nachname\"\n                              invalid={values.last_name.trim() !== '' && touched.last_name && !!errors.last_name}\n                              autoComplete=\"last_name\"\n                              maxLength={50}\n                              value={capitalizeWords(values.last_name || '')}\n                              onBlur={handleBlur}\n                              onChange={(e) => {\n                                if (config.validate.valueTypingExpressionsName(e)) handleChange(e);\n                              }}\n                              name=\"last_name\"\n                              className={styles.inputText}\n                              required\n                              disabled={!isUpdate}\n                            />\n\n                            <CInvalidFeedback>{errors.last_name}</CInvalidFeedback>\n                          </CFormGroup>\n                          <div className={styles.btnGroupWrap}>\n                            <div style={{ width: 124, height: 51, marginTop: 30 }}>\n                              <HBButtonFull\n                                type=\"button\"\n                                outline\n                                onClick={() => {\n                                  if (!dirty && gender === data.gender && dateOfBirth === data.birth_date)\n                                    setIsUpdate(false);\n                                  else setShow(true);\n                                }}\n                              >\n                                Abbrechen\n                              </HBButtonFull>\n                            </div>\n                            <div style={{ width: 124, height: 51, marginTop: 30 }}>\n                              <HBButtonFull\n                                type=\"submit\"\n                                disabled={\n                                  !isValid ||\n                                  !isValidMore ||\n                                  loading ||\n                                  (!dirty && gender === data.gender && dateOfBirth === data.birth_date)\n                                }\n                              >\n                                {loading ? <CSpinner color=\"light\" size=\"sm\" /> : 'Speichern'}\n                              </HBButtonFull>\n                            </div>\n                          </div>\n                        </>\n                      )}\n                    </CForm>\n                  )}\n                </Formik>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </div>\n    </>\n  );\n};\n\nexport default Profile;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileWrapper\":\"Profile_profileWrapper__rJ2X1\",\"profileContainer\":\"Profile_profileContainer__3wF2h\",\"title\":\"Profile_title__Z47aD\",\"bioTitle\":\"Profile_bioTitle__3ucFV\",\"leftWrapper\":\"Profile_leftWrapper__3Y16p\",\"userName\":\"Profile_userName__2wo_e\",\"avatarArea\":\"Profile_avatarArea__1KP-w\",\"avatarUser\":\"Profile_avatarUser__3LXjW\",\"overlay\":\"Profile_overlay__GczcO\",\"avatarUserButtonWrapper\":\"Profile_avatarUserButtonWrapper__obEk8\",\"avatarUserButton\":\"Profile_avatarUserButton__1BG9z\",\"formContainer\":\"Profile_formContainer__FqNPd\",\"form\":\"Profile_form__1V8TH\",\"formGroup\":\"Profile_formGroup__24ca1\",\"wrapperTitle\":\"Profile_wrapperTitle__3VZfa\",\"cardTitle\":\"Profile_cardTitle__2sNR-\",\"wrapperBtn\":\"Profile_wrapperBtn__30Mmj\",\"btnSubmit\":\"Profile_btnSubmit__1fqEK\",\"genderGroup\":\"Profile_genderGroup__2PvMZ\",\"btnNurse\":\"Profile_btnNurse__kE6_a\",\"contentNurse\":\"Profile_contentNurse__2EjQr\",\"uploadDocument\":\"Profile_uploadDocument__1-knE\",\"iconArrowNurse\":\"Profile_iconArrowNurse__1S1vJ\",\"modalBody\":\"Profile_modalBody__3o0OP\",\"modalBioTitle\":\"Profile_modalBioTitle__gQOGj\",\"mobdalBioBody\":\"Profile_mobdalBioBody__2unur\",\"btnEdit\":\"Profile_btnEdit__2APe1\",\"gender\":\"Profile_gender__3uTtV\",\"btnGender\":\"Profile_btnGender__32_RF\",\"inputText\":\"Profile_inputText__3sJ_v\",\"label\":\"Profile_label__35fsf\",\"dataOfBirth\":\"Profile_dataOfBirth__3oPMn\",\"date\":\"Profile_date__3VIeD\",\"valueDate\":\"Profile_valueDate__WB-QW\",\"valueDateDisable\":\"Profile_valueDateDisable__3hVJD\",\"iconDate\":\"Profile_iconDate__n0_jC\",\"changePasswordUser\":\"Profile_changePasswordUser__1Kv0m\",\"cardWrapper\":\"Profile_cardWrapper__2bc3n\",\"cardBody\":\"Profile_cardBody__14zzG\",\"inputPassword\":\"Profile_inputPassword__nLfcv\",\"inputTextPassword\":\"Profile_inputTextPassword__1cjGu\",\"iconPassword\":\"Profile_iconPassword__8Z-Gv\",\"invalidFeedBack\":\"Profile_invalidFeedBack__7_crA\",\"submit\":\"Profile_submit__3T48T\",\"bioContainer\":\"Profile_bioContainer__30P8I\",\"bioButton\":\"Profile_bioButton__3eVRF\",\"bioWrapper\":\"Profile_bioWrapper__D4L0N\",\"bio\":\"Profile_bio__2-1-C\",\"btnWrapper\":\"Profile_btnWrapper__HJ7yL\",\"btnGroupWrap\":\"Profile_btnGroupWrap__2Pcfh\"};"],"sourceRoot":""}