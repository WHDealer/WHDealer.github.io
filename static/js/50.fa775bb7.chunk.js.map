{"version":3,"sources":["views/user/consulting/FriendRequest.tsx","views/user/mobility/Frame.tsx","components/search/Search.tsx"],"names":["FriendRequest","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","data","loading","full","page","friends","setFriends","searchName","setSearchName","getListFriendRequest","method","api","config","rest","getListUsersConfirm","response","status","SUCCESS","length","useEffect","changeStatus","userId","changeStatusFriend","deleteFriend","searchParams","className","searchEmpty","callbackSearch","searchValue","validate","valueTypingExpressionsName","inputStyle","width","style","padding","display","justifyContent","alignItems","zIndex","listStyle","paddingLeft","marginBottom","placeholder","to","textAlign","map","friend","index","md","marginTop","first_name","last_name","img","avatar","id","size","render","loadingSmall","onEnter","mappingSize","large","medium","small","Frame","props","height","Search","dropdown","callbackEmpty","isNew","timeoutSearch","minLengthSearch","timeout","useRef","firstTime","setFirstTime","current","clearTimeout","trimmedSearchName","trim","setTimeout","position","type","value","maxLength","onChange","e","target","onKeyPress","key","left","top","color","fontSize"],"mappings":"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","file":"static/js/50.fa775bb7.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CCol, CContainer, CHeader, CRow } from '@coreui/react';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport Search from '../../../components/search/Search';\nimport { Waypoint } from 'react-waypoint';\nimport { loadingSmall } from '../../../extensions';\nimport Frame from '../mobility/Frame';\nimport FriendItem from './FriendItem';\n\nconst FriendRequest: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [friends, setFriends] = useState({ data: [], loading: true, full: false, page: 0 });\n  const [searchName, setSearchName] = useState('');\n  const pageSize = 10;\n\n  const getListFriendRequest = (searchName: any, page: any) => {\n    // get list friend request by search name, page from backend server\n\n    callApi(\n      {\n        // api method is get, url is config.rest.getListUsersConfirm, enable loading if page is 1\n        method: 'get',\n        api: config.rest.getListUsersConfirm(searchName, page, pageSize),\n        loading: page === 1,\n      },\n      (response) => {\n        // when call api success, get status, data of response\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          // if status is SUCCESS, set state friends follow by data of backend\n          setFriends({\n            data: page === 1 ? data.friends : [...friends.data, ...data.friends],\n            full: data.friends.length < pageSize,\n            loading: false,\n            page: page,\n          });\n        }\n      },\n    );\n  };\n\n  useEffect(() => {\n    getListFriendRequest(searchName, 1);\n  }, []);\n\n  const changeStatus = (userId: any, status: any) => {\n    callApi(\n      {\n        method: status === 'confirm' ? 'put' : 'delete',\n        api: status === 'confirm' ? config.rest.changeStatusFriend(userId) : config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          // setFriends((friends: any) => ({\n          //   ...friends,\n          //   data: [...friends],\n          //   // data: friends.data.filter((friendId: any) => friendId.id !== userId),\n          // }));\n        }\n      },\n    );\n  };\n\n  const loadMoreFriends = () => {\n    if (friends.loading || friends.full) return;\n    setFriends({ ...friends, loading: true });\n    getListFriendRequest(searchName, friends.page + 1);\n  };\n\n  const searchParams: any = {\n    className: 'header-topic--wrapper__search--selection__world',\n    searchName,\n    setSearchName,\n    searchEmpty: true,\n    callbackSearch: (searchValue: string) => getListFriendRequest(searchValue, 1),\n    validate: config.validate.valueTypingExpressionsName,\n    inputStyle: { width: 400 },\n  };\n\n  return (\n    <div>\n      <CContainer>\n        <div className=\"add-friend-page-wrapper\">\n          <CHeader\n            style={{ padding: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', zIndex: 1 }}\n          >\n            <h4>Friend Requests</h4>\n            <div style={{ width: 650 }}>\n              <ul\n                style={{\n                  listStyle: 'none',\n                  display: 'flex',\n                  paddingLeft: 0,\n                  justifyContent: 'space-between',\n                  marginBottom: 0,\n                  alignItems: 'center',\n                }}\n              >\n                <li>\n                  <Search {...searchParams} className=\"add-friend__search\" placeholder=\"Search friend\" />\n                </li>\n                <li>\n                  <Link to=\"/consulting/add-friend\">Friend List</Link>\n                </li>\n                <li>\n                  <Link to=\"/consulting/search-friend\">Search Friend</Link>\n                </li>\n              </ul>\n            </div>\n          </CHeader>\n          <div className=\"add-friend-main-page-body\">\n            <CRow>\n              {friends.data.length === 0 ? (\n                <div style={{ width: 100 + '%', textAlign: 'center' }}>No result</div>\n              ) : (\n                friends.data.map((friend: any, index: any) => (\n                  <CCol md={6} style={{ marginTop: '15px' }}>\n                    <FriendItem\n                      first_name={friend.first_name}\n                      last_name={friend.last_name}\n                      img={friend.avatar}\n                      id={friend.id}\n                      changeStatus={changeStatus}\n                      status=\"confirm\"\n                      key={index}\n                    />\n                  </CCol>\n                ))\n              )}\n            </CRow>\n          </div>\n          {friends.page !== 0 && friends.loading && <Frame size=\"large\" render={loadingSmall} />}\n          <Waypoint onEnter={loadMoreFriends} />\n        </div>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default FriendRequest;\n","import React from 'react';\n\ninterface Props {\n  size: 'large' | 'medium' | 'small';\n  render: any;\n}\n\nconst mappingSize = { large: 80, medium: 48, small: 36 };\n\nconst Frame: React.FC<Props> = (props) => {\n  const { size, render } = props;\n\n  return (\n    <div className=\"video-comments--comment\">\n      <div style={{ width: '100%', height: mappingSize[size] }}>{render}</div>\n    </div>\n  );\n};\n\nexport default Frame;\n","import { CInput } from '@coreui/react';\nimport { useEffect, useRef, useState } from 'react';\n\ninterface Props {\n  inputStyle?: any;\n  className?: string;\n  searchName?: string;\n  setSearchName?: (params: any) => void;\n  dropdown?: any;\n  callbackSearch?: (params: any) => void;\n  callbackEmpty?: () => void;\n  placeholder?: string;\n  searchEmpty?: boolean;\n  timeoutSearch?: number;\n  validate?: any;\n  minLengthSearch?: number;\n  isNew?: boolean;\n}\n\nconst Search: React.FC<Props> = (props) => {\n  const {\n    inputStyle,\n    className,\n    searchName,\n    setSearchName,\n    dropdown,\n    callbackSearch,\n    callbackEmpty,\n    placeholder,\n    searchEmpty,\n    validate,\n    isNew,\n  } = props;\n  let { timeoutSearch, minLengthSearch }: any = props;\n  if (!timeoutSearch) timeoutSearch = 1000;\n  if (!minLengthSearch) minLengthSearch = 1;\n\n  const timeout = useRef<any>(0);\n  const [firstTime, setFirstTime] = useState(false);\n\n  useEffect(() => {\n    if (firstTime) {\n      if (timeout.current) clearTimeout(timeout.current);\n      const trimmedSearchName: any = searchName?.trim();\n      if (trimmedSearchName?.length >= minLengthSearch || searchEmpty) {\n        timeout.current = setTimeout(() => {\n          callbackSearch?.(trimmedSearchName);\n        }, timeoutSearch);\n      }\n    } else setFirstTime(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchName]);\n\n  const handleChange = (e: any) => {\n    if (validate && !validate(e)) return;\n    const value = e.target.value;\n    setSearchName?.(value);\n    !value.trim() && callbackEmpty && callbackEmpty?.();\n  };\n\n  const handleKeyDown = (e: any) => {\n    if (e.key === 'Enter') {\n      if (timeout.current) clearTimeout(timeout.current);\n      const trimmedSearchName: any = searchName?.trim();\n      if (trimmedSearchName?.length >= minLengthSearch || searchEmpty) {\n        callbackSearch?.(trimmedSearchName);\n      }\n    }\n  };\n\n  return (\n    <div className={className} style={{ position: 'relative' }}>\n      <CInput\n        style={{ paddingLeft: 32, ...inputStyle }}\n        type=\"text\"\n        placeholder={placeholder || 'Search'}\n        value={searchName}\n        maxLength={50}\n        onChange={handleChange}\n        onKeyPress={handleKeyDown}\n      />\n      {isNew ? (\n        <i\n          style={{ position: 'absolute', left: 10, top: 8, color: 'var(--nightblue-100)', fontSize: 20 }}\n          className=\"hb-icon-search\"\n        />\n      ) : (\n        <i style={{ position: 'absolute', left: 10, top: 11, color: '#777' }} className=\"fa fa-search icon\" />\n      )}\n\n      {dropdown}\n    </div>\n  );\n};\n\nexport default Search;\n"],"sourceRoot":""}