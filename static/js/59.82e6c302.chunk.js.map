{"version":3,"sources":["views/user/newsfeed/SelectCategorySearch.tsx"],"names":["SelectCategorySearch","dispatch","useDispatch","history","useHistory","useState","searchName","setSearchName","searchSuggestionNames","setSearchSuggestionNames","searchRef","useRef","your_topics","useSelector","state","newsfeed","searchParams","innerRef","clearBtn","callbackSearch","value","payload","callback","method","api","config","rest","getNewsfeedSearch","response","data","status","SUCCESS","trim","categories","filter","item","includes","callApiAction","callbackEmpty","useEffect","current","focus","className","onClick","push","style","marginBottom","placeholder","maxHeight","marginRight","paddingRight","length","map","index","border","updateNewsfeedYourTopics","saveSetting","name","id"],"mappings":"wOA+FeA,UApF6C,WAC1D,IAAMC,EAAWC,cAGXC,EAAUC,cAJgD,EAK5BC,mBAAS,IALmB,mBAKzDC,EALyD,KAK7CC,EAL6C,OAMNF,mBAAS,IANH,mBAMzDG,EANyD,KAMlCC,EANkC,KAO1DC,EAAYC,iBAAY,MACtBC,EAAgBC,aAAY,SAACC,GAAD,OAAgBA,EAAMC,YAAlDH,YAqCFI,EAAe,CACnBC,SAAUP,EACVQ,UAAU,EACVZ,aACAC,gBACAY,eAxCwB,SAACC,GARX,IAACC,EAAcC,EAAdD,EAUb,CACEE,OAAQ,MACRC,IAAKC,IAAOC,KAAKC,kBAAkBP,IAZVE,EAc3B,SAACM,GAAc,IACLC,EAAiBD,EAAjBC,KAAiBD,EAAXE,SACCC,KAAWzB,EAAW0B,QACnCvB,EAAyBoB,EAAKI,WAAWC,QAAO,SAACC,GAAD,OAAgBC,YAASxB,EAAauB,QAjB1BlC,EAASoC,YAAchB,EAASC,KAiDlGgB,cAAe,kBAAM7B,EAAyB,MAOhD,OAJA8B,qBAAU,WACR7B,EAAU8B,QAAQC,UACjB,IAGD,cAAC,IAAD,UACE,gCACE,qBAAKC,UAAU,WAAf,SACE,qBAAKA,UAAU,sCAAf,SACE,eAAC,IAAD,CAAeC,QAAS,kBAAMxC,EAAQyC,KAAK,8BAA3C,UACE,mBAAGF,UAAU,6BADf,uBAKJ,qBAAKA,UAAU,UAAf,SACE,sBAAKA,UAAU,eAAeG,MAAO,CAAEC,aAAc,IAArD,UACE,cAAC,IAAD,2BAAc9B,GAAd,IAA4B+B,YAAY,iBACxC,qBAAKL,UAAU,2BAAf,4BACA,qBAAKA,UAAU,uCAAf,SACE,qBAAKA,UAAU,YAAYG,MAAO,CAAEG,UAAW,IAAKC,aAAc,GAAIC,aAAc,GAApF,SA1C2B,IAAjC1C,EAAsB2C,OAAqB,qBAAKT,UAAU,6BAAf,eACxClC,EAAsB4C,KAAI,SAACjB,EAAoCkB,GAArC,OAC/B,sBACEX,UAAU,oBACVG,MAAOQ,IAAU7C,EAAsB2C,OAAS,EAAI,CAAEG,OAAQ,QAAW,GAEzEX,QAAS,kBAZK,SAACR,GACnBlC,EAASsD,YAAyBpB,IAClChC,EAAQyC,KAAK,6BAUMY,CAAYrB,IAJ7B,UAME,mBAAGO,UAAU,mDACZP,EAAKsB,OAJDtB,EAAKuB,uB","file":"static/js/59.82e6c302.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport config from '../../../config';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { RouteComponentProps, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { HBButtonSmall, HBSearch } from '../../../hbBaseClass';\nimport { updateNewsfeedYourTopics } from '../../../store/newsfeed/actions';\nimport './Newsfeed.scss';\nimport ContainterEllipse from '../containers/ContainerEllipse';\nimport { includes } from '../../../utils';\n\nconst SelectCategorySearch: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n\n  const history = useHistory();\n  const [searchName, setSearchName] = useState('');\n  const [searchSuggestionNames, setSearchSuggestionNames] = useState([]);\n  const searchRef = useRef<any>(null);\n  const { your_topics } = useSelector((state: any) => state.newsfeed);\n\n  const getNewsfeedSearch = (value: string) => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getNewsfeedSearch(value),\n      },\n      (response) => {\n        const { data, status } = response;\n        if (status === SUCCESS && searchName.trim()) {\n          setSearchSuggestionNames(data.categories.filter((item: any) => !includes(your_topics, item)));\n        }\n      },\n    );\n  };\n\n  const saveSetting = (item: { id: string; name: string }) => {\n    dispatch(updateNewsfeedYourTopics(item));\n    history.push('/newsfeed/select-category');\n  };\n\n  const showSuggestionName = () => {\n    if (searchSuggestionNames.length === 0) return <div className=\"search-group-item disabled\">-</div>;\n    return searchSuggestionNames.map((item: { id: string; name: string }, index: number) => (\n      <div\n        className=\"search-group-item\"\n        style={index === searchSuggestionNames.length - 1 ? { border: 'none' } : {}}\n        key={item.id}\n        onClick={() => saveSetting(item)}\n      >\n        <i className=\"hb-icon-zoom-in hb-select-category-icon-search\" />\n        {item.name}\n      </div>\n    ));\n  };\n\n  const searchParams = {\n    innerRef: searchRef,\n    clearBtn: true,\n    searchName,\n    setSearchName,\n    callbackSearch: getNewsfeedSearch,\n    callbackEmpty: () => setSearchSuggestionNames([]),\n  };\n\n  useEffect(() => {\n    searchRef.current.focus();\n  }, []);\n\n  return (\n    <ContainterEllipse>\n      <div>\n        <div className=\"hb-mx-20\">\n          <div className=\"d-flex justify-content-end hb-my-28\">\n            <HBButtonSmall onClick={() => history.push('/newsfeed/select-category')}>\n              <i className=\"hb-icon-cross hb-icon-lg\" /> Schlie√üen\n            </HBButtonSmall>\n          </div>\n        </div>\n        <div className=\"hb-card\">\n          <div className=\"hb-margin-30\" style={{ marginBottom: 12 }}>\n            <HBSearch {...searchParams} placeholder=\"Suchbegriff\" />\n            <div className=\"hb-select-category-title\">Suchergebnisse</div>\n            <div className=\"hb-select-category-search-suggestion\">\n              <div className=\"hb-scroll\" style={{ maxHeight: 320, marginRight: -10, paddingRight: 5 }}>\n                {showSuggestionName()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ContainterEllipse>\n  );\n};\n\nexport default SelectCategorySearch;\n"],"sourceRoot":""}