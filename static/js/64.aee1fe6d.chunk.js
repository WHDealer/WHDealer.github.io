(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[64],{1064:function(e,a,t){"use strict";t.r(a);var r=t(4),n=t(8),i=t(27),l=t(1),c=t(57),s=t(34),o=t(45),d=t(28),b=t(64),u=t(59),j=t(655),m=t.n(j),_=t(163),h=t(609),p=t(610),f=t(638),O=t.n(f),v=(t(637),t(102)),x=t.n(v),g=t(31),N=t(35),P=Object(l.forwardRef)((function(e,a){var t=e.onClick;return Object(r.jsx)("div",{className:m.a.iconDate,onClick:t,ref:a,children:Object(r.jsx)("i",{className:"hb-icon-calendar-date"})})})),y=function(){return p.b().shape({first_name:p.d().trim().required("First Name is required"),last_name:p.d().trim().required("Last Name is required")})};a.default=function(e){var a=Object(d.c)((function(e){return e.auth})),t=Object(g.h)(),j=Object(d.b)(),p=function(e,a){return j(Object(o.d)(e,a))},f=Object(l.useRef)(null),v=Object(l.useState)(null),w=Object(i.a)(v,2),B=w[0],C=w[1],T=Object(l.useState)({file_path:"",link:""}),D=Object(i.a)(T,2),k=D[0],G=D[1],W=Object(l.useState)({file:"",imagePreviewUrl:"",avatar:(null===a||void 0===a?void 0:a.avatar)||"",loading:!1}),A=Object(i.a)(W,2),J=A[0],U=A[1],M=Object(l.useState)(!1),S=Object(i.a)(M,2),F=S[0],E=S[1],L=Object(l.useState)(0),q=Object(i.a)(L,2),R=q[0],V=q[1],Y=Object(l.useState)(!1),z=Object(i.a)(Y,2),I=z[0],Z=z[1],H=Object(l.useState)(null),K=Object(i.a)(H,2),Q=K[0],X=K[1],$=Object(d.c)((function(e){return e.auth.group_name})),ee=Object(l.useState)(!1),ae=Object(i.a)(ee,2),te=ae[0],re=ae[1];Object(l.useEffect)((function(){p({method:"get",api:s.c.rest.getProfileUser(),loading:!0},(function(e){var a=e.data;if(e.status===o.c){var t=Object(u.e)(a.birth_date);C(Object(n.a)(Object(n.a)({},a),{},{birth_date:t})),V(a.gender),X(t)}}))}),[]);var ne=function(){re(!te)},ie=Object(l.useRef)(null);if(!B)return Object(r.jsx)("div",{});var le="nurse"!==$||3!==R&&Q;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_.h,{show:te,handleClose:ne,title:"Abbrechen",content:"Sind sie sicher, dass sie Abbrechen wollen? Alle \xc4nderungen gehen dabei verloren.",up:"Ja, abbrechen",upCallback:function(){ie.current.resetForm(),E(!1),re(!1)},down:"Weiter bearbeiten",downCallback:ne}),Object(r.jsxs)("div",{className:"wide ".concat(m.a.profileWrapper),children:[Object(r.jsx)("h1",{className:m.a.title,children:"Profil"}),Object(r.jsxs)(c.L,{className:m.a.profileContainer,children:[Object(r.jsx)(c.j,{md:4,children:Object(r.jsxs)("div",{className:m.a.leftWrapper,children:[Object(r.jsxs)("div",{className:m.a.userName,children:[Object(r.jsx)("p",{children:B.first_name}),Object(r.jsx)("p",{children:B.last_name})]}),Object(r.jsxs)("div",{className:m.a.avatarArea,children:[Object(r.jsx)("div",{className:m.a.avatarUser,style:{backgroundImage:'url("'.concat((J.imagePreviewUrl?J.avatar||J.imagePreviewUrl:B.avatar_thumbnail)||N.a,'")')},children:Object(r.jsx)("div",{className:m.a.overlay,style:{backgroundColor:J.loading?"#fff4":"transparent"},children:Object(r.jsx)("div",{className:m.a.avatarLoading,children:J.loading?Object(r.jsx)(c.P,{style:{color:"var(--aquamarin-100)",borderWidth:4},size:"lg"}):""})})}),Object(r.jsx)(_.a,{className:m.a.avatarUserButtonWrapper,btnClassName:m.a.avatarUserButton,onClick:function(){var e;null===(e=f.current)||void 0===e||e.click(),p({method:"get",api:s.c.rest.getUploadLink("image")},(function(e){e.status===o.c&&G((null===e||void 0===e?void 0:e.data)||{})}))},color:"petrol",children:"Foto aktualisieren"}),Object(r.jsx)("input",{className:"avatar-user--input",type:"file",id:"myFile",name:"filename",ref:f,style:{display:"none"},accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){var a=new FileReader,t=e.target.files[0];t&&(a.onload=function(){G({file_path:t}),U({file:t,imagePreviewUrl:a.result,loading:!0}),function(e,a){var t=new Headers;t.append("x-amz-acl","public-read");var r=a;J.loading=!0,fetch(e,{method:"PUT",headers:t,body:r,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){console.log(e),Object(u.b)({avatar:null===k||void 0===k?void 0:k.avatar}),U((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1})})),j(Object(b.h)({avatar:null===k||void 0===k?void 0:k.avatar})),J.loading=!1})).catch((function(e){return console.log("error",e)}))}(k.link,t)},a.readAsDataURL(t))}})]})]})}),Object(r.jsx)(c.j,{md:8,children:Object(r.jsx)(c.e,{className:"hb-card ".concat(m.a.formContainer),children:Object(r.jsx)(c.f,{className:"hb-card-item",style:{marginBottom:0},children:Object(r.jsx)(h.a,{innerRef:ie,initialValues:B,enableReinitialize:!0,validate:Object(u.q)(y),onSubmit:function(e){var a=Object(u.f)(Q),t={gender:R,phone_number:e.phone_number,first_name:e.first_name.trim(),last_name:e.last_name.trim(),birth_date:a,bio:e.bio};Z(!0),p({method:"put",api:s.c.rest.editProfile(),body:t,msg:s.c.messages.updateMessageFailure},(function(r){var i=r.status;Z(!1),i===o.c&&(E(!1),C((function(r){var i={gender:R,phone_number:e.phone_number,first_name:e.first_name.trim(),last_name:e.last_name.trim(),birth_date:a};return Object(u.b)(i),j(Object(b.h)(i)),Object(n.a)(Object(n.a)(Object(n.a)({},r),t),{},{birth_date:Q})})))}))},children:function(e){var a=e.values,n=e.errors,i=e.touched,l=(e.status,e.dirty),o=e.handleChange,d=e.handleBlur,b=e.handleSubmit,j=(e.isSubmitting,e.isValid);e.handleReset,e.setTouched;return Object(r.jsxs)(c.q,{className:m.a.form,onSubmit:b,children:[Object(r.jsx)(c.r,{className:m.a.lastFormGroup,children:Object(r.jsxs)("div",{className:m.a.wrapperTitle,children:[Object(r.jsx)("div",{className:m.a.cardTitle,children:"Pers\xf6nliche Daten"}),Object(r.jsx)(_.a,{btnClassName:m.a.btnSubmit,className:m.a.wrapperBtn,onClick:function(){E(!0),ie.current.resetForm(),V(B.gender),X(B.birth_date)},type:"button",style:{display:F?"none":"flex"},children:"Daten bearbeiten"})]})}),!F&&Object(r.jsxs)(c.r,{className:"".concat(m.a.bioWrapper),children:[B.bio?Object(r.jsxs)(c.e,{className:m.a.modalBody,children:[Object(r.jsxs)(c.i,{className:m.a.modalBioTitle,children:[Object(r.jsx)("div",{children:"Biografie"}),Object(r.jsx)("i",{className:"hb-icon-pentool-2"})]}),Object(r.jsxs)(c.f,{className:m.a.mobdalBioBody,children:[B.bio,Object(r.jsx)(_.a,{btnClassName:m.a.btnEdit,className:m.a.wrapperBtn,onClick:function(){return t.push("/update-bio")},type:"button",children:"Bearbeiten"})]})]}):Object(r.jsxs)("div",{className:m.a.btnNurse,onClick:function(){return t.push("/update-bio")},children:[Object(r.jsxs)("div",{className:m.a.contentNurse,children:[Object(r.jsx)("div",{className:m.a.uploadDocument,children:Object(r.jsx)("i",{className:"hb-icon-book"})}),Object(r.jsx)("span",{children:"Biografie hinzuf\xfcgen"})]}),Object(r.jsx)("div",{className:m.a.iconArrowNurse,children:Object(r.jsx)("i",{className:"hb-icon-arrow-right"})})]}),Object(r.jsx)(c.A,{children:n.bio||""})]}),Object(r.jsxs)(c.r,{className:m.a.genderGroup,children:[Object(r.jsxs)("div",{className:m.a.label,style:{display:3===B.gender?"none":"block"},children:["Geschlecht",F&&"nurse"===$&&"*"]}),F?Object(r.jsxs)("div",{className:m.a.gender,children:[Object(r.jsx)(_.d,{type:"button",color:"petrol",onClick:function(){return V(1)},className:"".concat(m.a.btnGender," ").concat(1===R?"is-selected":""),children:"Weiblich"}),Object(r.jsx)(_.d,{type:"button",color:"petrol",onClick:function(){return V(0)},className:"".concat(m.a.btnGender," ").concat(0===R?"is-selected":""),children:"M\xe4nnlich"}),Object(r.jsx)(_.d,{type:"button",color:"petrol",onClick:function(){return V(2)},className:"".concat(m.a.btnGender," ").concat(2===R?"is-selected":""),children:"Andere"})]}):Object(r.jsx)(_.d,{disabled:!0,light:!0,type:"button",style:{display:3===B.gender?"none":"block"},children:0===B.gender?"M\xe4nnlich":1===B.gender?"Weiblich":"Andere"})]}),Object(r.jsxs)(c.r,{className:[m.a.formGroup,m.a.email],children:[Object(r.jsx)("div",{className:m.a.label,children:"Email"}),Object(r.jsx)(c.u,{type:"text",placeholder:"E-Mail Adresse",autoComplete:"email",name:"email",maxLength:50,value:a.email,onBlur:d,onChange:function(e){e.target.value.includes(" ")||o(e)},className:m.a.inputText,disabled:!0}),Object(r.jsx)(c.A,{children:n.email||""})]}),Object(r.jsxs)(c.r,{className:[m.a.formGroup,m.a.dataOfBirth],children:[Object(r.jsxs)("div",{className:m.a.label,children:["Geburtstag",F&&"nurse"===$&&"*"]}),F?Object(r.jsxs)("div",{className:m.a.date,children:[Object(r.jsx)("div",{className:F?m.a.valueDate:m.a.valueDateDisable,children:Q?x()(Q||B.birth_date).format("DD.MM.YYYY"):"TT.MM.JJJJ"}),Object(r.jsx)("div",{style:{width:50},className:"hb-datepicker",children:Object(r.jsx)(O.a,{selected:Q,customInput:Object(r.jsx)(P,{}),onChange:function(e){return X(e)},yearDropdownItemNumber:40,showYearDropdown:!0,showMonthDropdown:!0,scrollableYearDropdown:!0,adjustDateOnChange:!0,withPortal:!0,maxDate:new Date,popperPlacement:"top-end",disabled:!F})})]}):Object(r.jsx)(c.u,{type:"text",placeholder:"TT.MM.JJJJ",autoComplete:"birth_date",name:"birth_date",value:B.birth_date?x()(B.birth_date).format("DD.MM.YYYY")||"":"TT.MM.JJJJ",onBlur:d,onChange:function(e){e.target.value.includes(" ")||o(e)},className:m.a.inputText,disabled:!0}),Object(r.jsx)(c.A,{children:n.birth_date||""})]}),Object(r.jsxs)(c.r,{className:[F?m.a.formGroup:"",m.a.phone],children:[Object(r.jsx)("div",{className:m.a.label,children:"Telefonnummer"}),Object(r.jsx)(c.u,{type:"text",placeholder:"Telefonnummer",autoComplete:"phone_number",name:"phone_number",value:a.phone_number||"",onBlur:d,onChange:function(e){e.target.value&&!s.c.validate.valueTypingExpressionsPhone(e)||o(e)},maxLength:20,className:m.a.inputText,disabled:!F}),Object(r.jsx)(c.A,{children:n.phone_number||""})]}),F&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(c.r,{className:m.a.formGroup,children:[Object(r.jsx)("div",{className:m.a.label,children:"Vorname*"}),Object(r.jsx)(c.u,{type:"text",placeholder:"Vorname",invalid:""!==a.first_name.trim()&&i.first_name&&!!n.first_name,autoComplete:"first_name",maxLength:50,value:Object(u.c)(a.first_name||""),onBlur:d,onChange:function(e){s.c.validate.valueTypingExpressionsName(e)&&o(e)},name:"first_name",className:m.a.inputText,required:!0,disabled:!F}),Object(r.jsx)(c.A,{children:n.first_name})]}),Object(r.jsxs)(c.r,{children:[Object(r.jsx)("div",{className:m.a.label,children:"Nachname*"}),Object(r.jsx)(c.u,{type:"text",placeholder:"Nachname",invalid:""!==a.last_name.trim()&&i.last_name&&!!n.last_name,autoComplete:"last_name",maxLength:50,value:Object(u.c)(a.last_name||""),onBlur:d,onChange:function(e){s.c.validate.valueTypingExpressionsName(e)&&o(e)},name:"last_name",className:m.a.inputText,required:!0,disabled:!F}),Object(r.jsx)(c.A,{children:n.last_name})]}),Object(r.jsxs)("div",{className:m.a.btnGroupWrap,children:[Object(r.jsx)("div",{style:{width:124,height:51,marginTop:30},children:Object(r.jsx)(_.b,{type:"button",outline:!0,onClick:function(){l||R!==B.gender||Q!==B.birth_date?re(!0):E(!1)},children:"Abbrechen"})}),Object(r.jsx)("div",{style:{width:124,height:51,marginTop:30},children:Object(r.jsx)(_.b,{type:"submit",disabled:!j||!le||I||!l&&R===B.gender&&Q===B.birth_date,children:I?Object(r.jsx)(c.P,{color:"light",size:"sm"}):"Speichern"})})]})]})]})}})})})})]})]})]})}},655:function(e,a,t){e.exports={profileWrapper:"Profile_profileWrapper__rJ2X1",profileContainer:"Profile_profileContainer__3wF2h",title:"Profile_title__Z47aD",bioTitle:"Profile_bioTitle__3ucFV",leftWrapper:"Profile_leftWrapper__3Y16p",userName:"Profile_userName__2wo_e",avatarArea:"Profile_avatarArea__1KP-w",avatarUser:"Profile_avatarUser__3LXjW",overlay:"Profile_overlay__GczcO",avatarUserButtonWrapper:"Profile_avatarUserButtonWrapper__obEk8",avatarUserButton:"Profile_avatarUserButton__1BG9z",formContainer:"Profile_formContainer__FqNPd",form:"Profile_form__1V8TH",formGroup:"Profile_formGroup__24ca1",wrapperTitle:"Profile_wrapperTitle__3VZfa",cardTitle:"Profile_cardTitle__2sNR-",wrapperBtn:"Profile_wrapperBtn__30Mmj",btnSubmit:"Profile_btnSubmit__1fqEK",genderGroup:"Profile_genderGroup__2PvMZ",btnNurse:"Profile_btnNurse__kE6_a",contentNurse:"Profile_contentNurse__2EjQr",uploadDocument:"Profile_uploadDocument__1-knE",iconArrowNurse:"Profile_iconArrowNurse__1S1vJ",modalBody:"Profile_modalBody__3o0OP",modalBioTitle:"Profile_modalBioTitle__gQOGj",mobdalBioBody:"Profile_mobdalBioBody__2unur",btnEdit:"Profile_btnEdit__2APe1",gender:"Profile_gender__3uTtV",btnGender:"Profile_btnGender__32_RF",inputText:"Profile_inputText__3sJ_v",label:"Profile_label__35fsf",dataOfBirth:"Profile_dataOfBirth__3oPMn",date:"Profile_date__3VIeD",valueDate:"Profile_valueDate__WB-QW",valueDateDisable:"Profile_valueDateDisable__3hVJD",iconDate:"Profile_iconDate__n0_jC",changePasswordUser:"Profile_changePasswordUser__1Kv0m",cardWrapper:"Profile_cardWrapper__2bc3n",cardBody:"Profile_cardBody__14zzG",inputPassword:"Profile_inputPassword__nLfcv",inputTextPassword:"Profile_inputTextPassword__1cjGu",iconPassword:"Profile_iconPassword__8Z-Gv",invalidFeedBack:"Profile_invalidFeedBack__7_crA",submit:"Profile_submit__3T48T",bioContainer:"Profile_bioContainer__30P8I",bioButton:"Profile_bioButton__3eVRF",bioWrapper:"Profile_bioWrapper__D4L0N",bio:"Profile_bio__2-1-C",btnWrapper:"Profile_btnWrapper__HJ7yL",btnGroupWrap:"Profile_btnGroupWrap__2Pcfh"}}}]);
//# sourceMappingURL=64.aee1fe6d.chunk.js.map