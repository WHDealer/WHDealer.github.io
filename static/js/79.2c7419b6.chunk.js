(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[79],{1197:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a(8),i=a(27),s=a(1),o=a(31),r=a(57),d=a(102),l=a.n(d),u=a(605),j=a(611),h=a(28),b=a(45),m=a(34),O=a(35),g=[{key:"no",_style:{width:"15%",paddingLeft:20}},{key:"name",label:"Category name",_style:{width:"30%"}},{key:"created_date",_style:{width:"15%"}},{key:"top_category",_style:{width:"15%",textAlign:"center"}},{key:"action",_style:{width:"15%",textAlign:"center"}}];t.default=function(e){var t,a=Object(h.b)(),d=function(e,t){return a(Object(b.d)(e,t))},f=Object(o.h)(),x=new URLSearchParams(null===(t=e.location)||void 0===t?void 0:t.search),p=Math.max(Number(x.get("page"))||1,1),y=Object(s.useState)(!1),w=Object(i.a)(y,2),v=w[0],N=w[1],k=Object(s.useState)(null),C=Object(i.a)(k,2),D=C[0],S=C[1],_=Object(s.useState)(null),P=Object(i.a)(_,2),T=P[0],A=P[1],B=Object(s.useState)(""),Y=Object(i.a)(B,2),L=Y[0],M=Y[1],R=Object(s.useState)({data:[],total:0,totalPages:0,loading:!0}),V=Object(i.a)(R,2),q=V[0],z=V[1],E=Object(s.useState)({show:!1,id:"",name:""}),F=Object(i.a)(E,2),J=F[0],G=F[1],H=Object(s.useState)({show:!1,id:"",name:""}),I=Object(i.a)(H,2),U=I[0],K=I[1],Q=function(e,t){z(Object(c.a)(Object(c.a)({},q),{},{loading:!0})),d({method:"get",api:m.c.rest.adminGetNewsfeedCategories(e,t,v,D?D.getTime()/1e3:null,T?T.getTime()/1e3+86399:null)},(function(t){var a=t.status,n=t.data;a===b.c?(z({data:n.categories.map((function(t,a){return Object(c.a)(Object(c.a)({},t),{},{no:a+1+10*(e-1)})})),total:n.total,totalPages:Math.ceil(n.total/10),loading:!1}),p!==e&&f.push("?page=".concat(e))):z((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})}))}))};Object(s.useEffect)((function(){Q(p,L)}),[D,T,v]);var W=Object(n.jsx)("div",{});q.loading||q.total||(W=Object(n.jsx)("div",{children:"No items found"}));return Object(n.jsxs)("div",{style:{width:"90%",margin:"10px auto"},children:[Object(n.jsx)(u.b,{isVisible:J.show,title:"Delete Category",content:'Are you sure to delete the category "'.concat(J.name,'"'),leftButtonText:"No",rightButtonText:"Yes",leftButtonOnPress:function(){return G({show:!1,id:"",name:""})},rightButtonOnPress:function(){G({show:!1,id:"",name:""}),K({show:!0,id:J.id,name:J.name})}}),Object(n.jsx)(u.d,{isVisible:U.show,title:"Delete Category",leftButtonText:"Cancel",rightButtonText:"Delete",content:'Please enter your password to delete category "'.concat(U.name,'"!'),callback:function(e){return function(e,t){G({show:!1,id:"",name:""}),z(Object(c.a)(Object(c.a)({},q),{},{loading:!0})),d({method:"post",api:m.c.rest.confirmPassword(),body:{password:t}},(function(t){t.status===b.c?d({method:"delete",api:m.c.rest.adminDeleteNewsfeedCategory(e)},(function(e){e.status===b.c?Q(p,L):z((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})}))})):z((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})}))}))}(U.id,e)},handleClose:function(){return K({show:!1,id:"",name:""})}}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"All Categories"}),Object(n.jsxs)("div",{className:"d-flex align-items-center mt-4 mb-5",children:[Object(n.jsx)(j.a,{className:"mr-5",searchName:L,setSearchName:M,searchEmpty:!0,callbackSearch:function(e){return Q(1,e)}}),"Filter by top category",Object(n.jsx)("input",{style:{width:20,height:20,marginLeft:20,marginRight:50},type:"checkbox",checked:v,onChange:function(){return N(!v)}}),Object(n.jsx)("div",{children:"From date:"}),Object(n.jsx)("div",{children:Object(n.jsx)(u.e,{maxDate:T||new Date,date:D,setDate:S})}),Object(n.jsx)("div",{children:"To date:"}),Object(n.jsx)("div",{children:Object(n.jsx)(u.e,{minDate:D,date:T,setDate:A})})]})]}),Object(n.jsx)("div",{style:{minHeight:"65vh"},children:Object(n.jsx)(r.l,{items:q.data,fields:g,loading:q.loading,noItemsViewSlot:W,hover:!0,striped:!0,scopedSlots:{no:function(e){return Object(n.jsx)("td",{className:"align-middle",style:{paddingLeft:20},children:e.no})},name:function(e){return Object(n.jsx)("td",{className:"align-middle",children:e.name})},created_date:function(e){return Object(n.jsx)("td",{className:"align-middle",children:l()(1e3*e.created_date).format("DD/MM/YYYY")})},top_category:function(e){return Object(n.jsx)("td",{className:"align-middle",style:{textAlign:"center"},children:Object(n.jsx)("input",{style:{width:20,height:20},checked:"top_topic"===e.type_key,type:"checkbox",onChange:function(){return function(e){z(Object(c.a)(Object(c.a)({},q),{},{loading:!0})),d({method:"put",api:m.c.rest.adminDeleteNewsfeedCategory(e.id)},(function(e){e.status===b.c&&Q(p,L)}))}(e)}})})},action:function(e){return Object(n.jsxs)("td",{className:"align-middle",style:{textAlign:"center"},children:[Object(n.jsx)(r.d,{color:"primary",variant:"outline",shape:"square",size:"sm",style:{marginRight:10},onClick:function(){return f.push("/admin/newsfeed/".concat(e.id))},children:Object(n.jsx)("i",{className:"fas fa-eye",children:" "})}),Object(n.jsx)(r.d,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){return G({show:!0,id:e.id,name:e.name})},children:Object(n.jsx)("i",{className:"fas fa-trash-alt",children:" "})})]})}}})}),Object(O.h)(q.totalPages,p,(function(e){p!==e&&(f.push("?page=".concat(e)),Q(e,L))}),q.total)]})}}}]);
//# sourceMappingURL=79.2c7419b6.chunk.js.map