{"version":3,"sources":["views/admin/mobility/CategoryDetail.tsx"],"names":["fields","key","_style","width","label","CategoryDetail","props","useTranslation","t","dispatch","useDispatch","callApi","payload","callback","callApiAction","categoryId","useHistory","match","params","id","useState","data","total","totalPages","loading","page","videos","setVideos","status","setStatus","searchText","setSearchText","searchUploaderText","setSearchUploaderText","full","uploaders","setUploaders","selectedUploader","setSelectedUploader","show","name","popupDeleteVideo","setPopupDeleteVideo","useEffect","method","api","SUCCESS","setCategoryInfo","setTitle","title","editing","value","setDescription","description","categoryInfo","getMobilityUploaders","getVideos","titleRef","current","focus","descriptionRef","window","onbeforeunload","noItems","newPage","config","rest","response","video","map","item","index","addNo","Math","ceil","uploaderName","newUsers","users","first_name","last_name","length","handleSave","isTitle","body","useRef","when","message","className","to","isVisible","content","leftButtonText","rightButtonText","leftButtonOnPress","rightButtonOnPress","handleClose","style","height","display","alignItems","loadingSmall","position","ref","placeholder","disabled","maxLength","onChange","e","target","onClick","right","top","textAlign","color","trim","size","rows","searchName","setSearchName","searchEmpty","callbackSearch","selected","setSelected","defaultValue","listStatus","setValue","validation","validate","valueTypingExpressionsName","minHeight","items","noItemsViewSlot","hover","striped","scopedSlots","no","overflowWrap","substring","created_date","moment","format","uploader","views","comment","like","modified_date","tag","tags","split","showMore","slice","i","action","variant","shape","marginRight","pagination"],"mappings":"wQAYMA,EAAS,CACb,CAAEC,IAAK,KAAMC,OAAQ,CAAEC,MAAO,OAC9B,CAAEF,IAAK,OAAQG,MAAO,QAASF,OAAQ,CAAEC,MAAO,MAChD,CAAEF,IAAK,cAAeC,OAAQ,CAAEC,MAAO,QACvC,CAAEF,IAAK,eAAgBC,OAAQ,CAAEC,MAAO,OACxC,CAAEF,IAAK,gBAAiBG,MAAO,gBAAiBF,OAAQ,CAAEC,MAAO,OACjE,CAAEF,IAAK,WAAYC,OAAQ,CAAEC,MAAO,QACpC,CAAEF,IAAK,MAAOC,OAAQ,CAAEC,MAAO,OAC/B,CAAEF,IAAK,QAASC,OAAQ,CAAEC,MAAO,OACjC,CAAEF,IAAK,UAAWC,OAAQ,CAAEC,MAAO,OACnC,CAAEF,IAAK,OAAQC,OAAQ,CAAEC,MAAO,OAChC,CAAEF,IAAK,SAAUC,OAAQ,CAAEC,MAAO,OAClC,CAAEF,IAAK,SAAUC,OAAQ,CAAEC,MAAO,SAgbrBE,UApZuC,SAACC,GACvCC,cAANC,EADwD,IAAD,EAEzDC,EAAWC,cACXC,EAAU,SAACC,EAAcC,GAAf,OAAkCJ,EAASK,YAAcF,EAASC,KAI5EE,GAHUC,eAEC,UAAGV,EAAMW,aAAT,aAAG,EAAaC,QACPC,IAPqC,EASnCC,mBAA2B,CACrDC,KAAM,GACNC,MAAO,EACPC,WAAY,EACZC,SAAS,EACTC,KAAM,IAduD,mBASxDC,EATwD,KAShDC,EATgD,OAgBnCP,mBAAc,MAhBqB,mBAgBxDQ,EAhBwD,KAgBhDC,EAhBgD,OAiB3BT,mBAAS,IAjBkB,mBAiBxDU,EAjBwD,KAiB5CC,EAjB4C,OAmBXX,mBAAS,IAnBE,mBAmBxDY,EAnBwD,KAmBpCC,EAnBoC,OAoB7Bb,mBAAc,CAAEC,KAAM,GAAIG,SAAS,EAAMU,MAAM,EAAOT,KAAM,IApB/B,mBAoBxDU,EApBwD,KAoB7CC,EApB6C,OAqBfhB,mBAAc,MArBC,mBAqBxDiB,EArBwD,KAqBtCC,EArBsC,OAuBflB,mBAAS,CAAEmB,MAAM,EAAOpB,GAAI,GAAIqB,KAAM,KAvBvB,mBAuBxDC,EAvBwD,KAuBtCC,EAvBsC,KA+B/DC,qBAAU,WACRhC,EAAQ,CAAEiC,OAAQ,MAAOC,IAAI,4BAAD,OAA8B9B,KAAgB,YAA4B,IAAzBa,EAAwB,EAAxBA,OAAQP,EAAgB,EAAhBA,KAC/EO,IAAWkB,KACbC,EAAgB,aAAEvB,SAAS,GAAUH,IACrC2B,GAAS,2BAAKC,IAAN,IAAaC,SAAS,EAAOC,MAAO9B,EAAK4B,SACjDG,GAAe,2BAAKC,IAAN,IAAmBH,SAAS,EAAOC,MAAO9B,EAAKgC,gBAE7DN,EAAgB,2BAAKO,GAAN,IAAoB9B,SAAS,QAGhD+B,GAAqB,GAAI,KACxB,IAEHZ,qBAAU,WACRa,GAAU1B,EAAY,KACrB,CAACF,EAAQS,IA9CmD,MAgDvBjB,mBAAS,CAAEI,SAAS,EAAMyB,MAAO,GAAII,YAAa,KAhD3B,mBAgDxDC,EAhDwD,KAgD1CP,EAhD0C,QAiDrC3B,mBAAS,CAAE8B,SAAS,EAAO1B,SAAS,EAAO2B,MAAO,KAjDb,qBAiDxDF,GAjDwD,MAiDjDD,GAjDiD,SAkDzB5B,mBAAS,CAAE8B,SAAS,EAAO1B,SAAS,EAAO2B,MAAO,KAlDzB,qBAkDxDE,GAlDwD,MAkD3CD,GAlD2C,MAoD/DT,qBAAU,WACHM,GAAMC,SACXO,GAASC,QAAQC,UAChB,CAACV,GAAMC,UAEVP,qBAAU,WACHU,GAAYH,SACjBU,GAAeF,QAAQC,UACtB,CAACN,GAAYH,UAEhBP,qBAAU,WACR,GAAKM,GAAMC,SAAYG,GAAYH,QAMnC,OAJAW,OAAOC,eAAiB,WACtB,OAAO,GAGF,WACLD,OAAOC,eAAiB,QAEzB,CAACb,GAAMC,QAASG,GAAYH,UAE/B,IAAIa,GAAU,wBAETrC,EAAOF,SACLE,EAAOJ,QAAOyC,GAAU,6CAG/B,IAAMP,GAAY,SAAC1B,EAAoBkC,GACrCrC,GAAU,SAACD,GACT,OAAO,2BAAKA,GAAZ,IAAoBF,SAAS,OAE/Bb,EACE,CACEiC,OAAQ,MACRC,IAAKoB,IAAOC,KAAKV,UACfzC,EACAsB,EAAmBA,EAAiBlB,GAAK,GACzCS,EAASA,EAAOT,GAAK,GA5FN,GA8Ff6C,EACAlC,EACA,MAGJ,SAACqC,GAAmB,IACVvC,EAAiBuC,EAAjBvC,OAAQP,EAAS8C,EAAT9C,KACZO,IAAWkB,IACbnB,EAAU,CACRN,KAAMA,EAAK+C,MAAMC,KAAI,SAACC,EAAWC,GAAZ,OAA8BC,YAAMF,EAAMC,EAAOP,MACtExC,SAAS,EACTF,MAAOD,EAAKC,MACZC,WAAYkD,KAAKC,KAAKrD,EAAKC,MA1Gd,IA2GbG,KAAMuC,IAGRrC,GAAU,SAACD,GACT,OAAO,2BAAKA,GAAZ,IAAoBF,SAAS,WAMjC+B,GAAuB,SAACoB,EAAsBlD,GAClDd,EACE,CACEiC,OAAQ,MACRC,IAAI,qDAAD,OAAuDpB,EAAvD,wBAA2EkD,KAEhF,SAACR,GAAmB,IACVvC,EAAiBuC,EAAjBvC,OAAQP,EAAS8C,EAAT9C,KACZO,IAAWkB,KACbV,GAAa,SAACD,GACZ,IAAMyC,EAAWvD,EAAKwD,MAAMR,KAAI,SAACC,GAC/B,MAAO,CAAEnD,GAAImD,EAAKnD,GAAIqB,KAAM8B,EAAKQ,WAAa,IAAMR,EAAKS,cAI3D,MAAO,CAAE1D,KADE,IAATI,EAA+B,KAAjBkD,EAAA,CAAuB,MAAvB,mBAAgCC,IAAYA,EAA1D,sBAA0EzC,EAAUd,MAApF,YAA6FuD,IACzEpD,SAAS,EAAOU,KAAMb,EAAKwD,MAAMG,OAAS,GAAIvD,KAAMA,UAO9EwD,GAAa,SAACC,GAClBA,EAAUlC,GAAS,2BAAKC,IAAN,IAAazB,SAAS,KAAU4B,GAAe,2BAAKC,IAAN,IAAmB7B,SAAS,KAC5Fb,EACE,CACEiC,OAAQ,MACRC,IAAI,4BAAD,OAA8B9B,GACjCoE,KAAM,CACJlC,MAAOiC,EAAUjC,GAAME,MAAQG,EAAaL,MAC5CI,YAAa6B,EAAU5B,EAAaD,YAAcA,GAAYF,SAGlE,YAAqB,EAAlBvB,SACckB,IACToC,GACFlC,GAAS,2BAAKC,IAAN,IAAaC,SAAS,EAAO1B,SAAS,KAC9CuB,GAAgB,SAACO,GACf,OAAO,2BAAKA,GAAZ,IAA0BL,MAAOA,GAAME,aAGzCC,GAAe,2BAAKC,IAAN,IAAmBH,SAAS,EAAO1B,SAAS,KAC1DuB,GAAgB,SAACO,GACf,OAAO,2BAAKA,GAAZ,IAA0BD,YAAaA,GAAYF,YAInD+B,EAASlC,GAAS,2BAAKC,IAAN,IAAazB,SAAS,KACtC4B,GAAe,2BAAKC,IAAN,IAAmB7B,SAAS,SAqBjDiC,GAAW2B,iBAAY,MACvBxB,GAAiBwB,iBAAY,MAEnC,OACE,iCACInC,GAAMC,SAAWG,GAAYH,UAAY,cAAC,IAAD,CAAQmC,MAAM,EAAMC,QAAQ,uCACvE,cAAC,IAAD,CAAMC,UAAU,mBAAmBC,GAAG,6BAAtC,iCAGA,sBAAMD,UAAU,cAAhB,6BACA,sBAAKA,UAAU,UAAf,UACE,cAAC,IAAD,CACEE,UAAWhD,EAAiBF,KAC5BU,MAAM,eACNyC,QAAO,2CAAsCjD,EAAiBD,MAC9DmD,eAAe,KACfC,gBAAgB,MAChBC,kBAAmB,kBAAMnD,EAAoB,CAAEH,MAAM,EAAOpB,GAAI,GAAIqB,KAAM,MAC1EsD,mBA9BkB,WACxBnF,EACE,CAAEiC,OAAQ,SAAUC,IAAI,uBAAD,OAAyBJ,EAAiBtB,IAAMK,SAAS,IAChF,YAAqB,EAAlBI,SACckB,KACbU,GAAU1B,EAAY,MAI5BY,EAAoB,CAAEH,MAAM,EAAOpB,GAAI,GAAIqB,KAAM,MAsB3CuD,YAAa,kBAAMrD,EAAoB,CAAEH,MAAM,EAAOpB,GAAI,GAAIqB,KAAM,QAEtE,qBAAK+C,UAAU,qBAAf,SACIjC,EAAa9B,QAyEb,qBAAKwE,MAAO,CAAEC,OAAQ,IAAKC,QAAS,OAAQC,WAAY,UAAxD,SAAqEC,MAxErE,sBAAKb,UAAU,YAAf,UACE,qBAAKA,UAAU,OAAf,sBACA,sBAAKS,MAAO,CAAEK,SAAU,YAAxB,UACE,uBACEC,IAAK7C,GACL8B,UAAU,eACVgB,YAAY,gBACZC,UAAWvD,GAAMC,SAAWD,GAAMzB,QAClC2B,MAAOF,GAAME,MACbsD,UAAW,IACXC,SAAU,SAACC,GAAD,OAAY3D,GAAS,2BAAKC,IAAN,IAAaE,MAAOwD,EAAEC,OAAOzD,aAE3DF,GAAMC,SACN,mBACEqC,UAAU,8BACVsB,QAAS,kBAAM7D,GAAS,2BAAKC,IAAN,IAAaC,SAAS,MAC7C8C,MAAO,CAAEK,SAAU,WAAYS,MAAO,GAAIC,IAAK,SAIpD9D,GAAMC,SACL,sBAAKqC,UAAU,OAAOS,MAAO,CAAEgB,UAAW,QAAS7G,MAAO,QAA1D,UACE,cAAC,IAAD,CAAS6F,MAAO,CAAE7F,MAAO,IAAM8G,MAAM,YAAY1B,UAAU,OAAOsB,QA7DxD,kBAAM7D,GAAS,2BAAKC,IAAN,IAAaC,SAAS,EAAOC,MAAOG,EAAaL,UA6DzE,oBAGA,cAAC,IAAD,CACE+C,MAAO,CAAE7F,MAAO,IAChB8G,MAAM,UACNJ,QAAS,kBAAM5B,IAAW,IAC1BuB,SAAiC,KAAvBvD,GAAME,MAAM+D,QAAiBjE,GAAMzB,SAAWyB,GAAME,QAAUG,EAAaL,MAJvF,SAMGA,GAAMzB,QAAU,cAAC,IAAD,CAAU2F,KAAK,KAAKF,MAAM,UAAa,YAI9D,qBAAK1B,UAAU,OAAf,yBACA,sBAAKS,MAAO,CAAEK,SAAU,YAAxB,UACE,0BACEC,IAAK1C,GACL2B,UAAU,eACV6B,KAAM,GACNb,YAAY,cACZC,UAAWnD,GAAYH,SAAWG,GAAY7B,QAC9C2B,MAAOE,GAAYF,MACnBsD,UAAW,IACXC,SAAU,SAACC,GAAD,OAAYvD,GAAe,2BAAKC,IAAN,IAAmBF,MAAOwD,EAAEC,OAAOzD,aAEvEE,GAAYH,SACZ,mBACEqC,UAAU,8BACVsB,QAAS,kBAAMzD,GAAe,2BAAKC,IAAN,IAAmBH,SAAS,MACzD8C,MAAO,CAAEK,SAAU,WAAYS,MAAO,GAAIC,IAAK,SAIpD1D,GAAYH,SACX,sBAAKqC,UAAU,OAAOS,MAAO,CAAEgB,UAAW,QAAS7G,MAAO,QAA1D,UACE,cAAC,IAAD,CAAS6F,MAAO,CAAE7F,MAAO,IAAM8G,MAAM,YAAY1B,UAAU,OAAOsB,QA/FlD,kBAC9BzD,GAAe,2BAAKC,IAAN,IAAmBH,SAAS,EAAOC,MAAOG,EAAaD,gBA8FvD,oBAGA,cAAC,IAAD,CACE2C,MAAO,CAAE7F,MAAO,IAChB8G,MAAM,UACNJ,QAAS,kBAAM5B,IAAW,IAC1BuB,SAAUnD,GAAY7B,SAAW6B,GAAYF,QAAUG,EAAaD,YAJtE,SAMGA,GAAY7B,QAAU,cAAC,IAAD,CAAU2F,KAAK,KAAKF,MAAM,UAAa,iBAS1E,sBAAK1B,UAAU,WAAf,UACE,qBAAKA,UAAU,8DAAf,SACE,sBAAKA,UAAU,SAAf,UACE,qBAAKS,MAAO,CAAE7F,MAAO,KAArB,SACE,cAAC,IAAD,CACEkH,WAAYvF,EACZwF,cAAevF,EACfwD,UAAU,OACVgC,aAAa,EACbC,eAAgB,SAACH,GAAD,OAAgB7D,GAAU6D,EAAY,QAG1D,qBAAKrB,MAAO,CAAE7F,MAAO,KAArB,SACE,cAAC,IAAD,CACEoF,UAAU,OACVkC,SAAU7F,EACV8F,YAAa7F,EACb8F,aAAa,gBACbtG,KAAMuG,IACNpG,SAAS,EACTU,MAAM,EACNiB,MAAOvB,EAASA,EAAOY,KAAO,OAGlC,qBAAKwD,MAAO,CAAE7F,MAAO,KAArB,SACE,cAAC,IAAD,yBACEoF,UAAU,OACVkC,SAAUpF,EACVqF,YAAapF,EACbqF,aAAa,kBACbxE,MAAOnB,EACP6F,SAAU5F,EACVuF,eAAgBjE,IACZpB,GARN,IASE2F,WAAY7D,IAAO8D,SAASC,2BAC5BvB,UAAW,aAKnB,qBAAKT,MAAO,CAAEiC,UAAW,OAAQjB,UAAW,UAA5C,SACE,cAAC,IAAD,CACEkB,MAAOxG,EAAOL,KACdrB,OAAQA,EACRwB,QAASE,EAAOF,QAChB2G,gBAAiBpE,GACjBqE,OAAK,EACLC,SAAO,EACPC,YAAa,CACXC,GAAI,SAACjE,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAKiE,MAChE/F,KAAM,SAAC8B,GAAD,iBACJ,oBAAIiB,UAAU,eAAetC,OAAW,OAAJqB,QAAI,IAAJA,GAAA,UAAAA,EAAM9B,YAAN,eAAYwC,QAAS,GAArB,OAA0BV,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAM9B,KAAO,GAA3E,SACE,sBAAMwD,MAAO,CAAEwC,aAAc,aAActC,QAAS,eAAgB/F,MAAO,KAA3E,UACO,OAAJmE,QAAI,IAAJA,GAAA,UAAAA,EAAM9B,YAAN,eAAYwC,QAAS,IAAS,OAAJV,QAAI,IAAJA,GAAA,UAAAA,EAAM9B,YAAN,eAAYiG,UAAU,EAAG,KAAU,MAA7D,OAAqEnE,QAArE,IAAqEA,OAArE,EAAqEA,EAAM9B,UAIlFa,YAAa,SAACiB,GAAD,iBACX,oBACE0B,MAAO,CAAEC,OAAQ,IACjBV,UAAU,eACVtC,OAAW,OAAJqB,QAAI,IAAJA,GAAA,UAAAA,EAAMjB,mBAAN,eAAmB2B,QAAS,GAA5B,OAAiCV,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAMjB,YAAc,GAH9D,UAKO,OAAJiB,QAAI,IAAJA,GAAA,UAAAA,EAAMjB,mBAAN,eAAmB2B,QAAS,IACrB,OAAJV,QAAI,IAAJA,GAAA,UAAAA,EAAMjB,mBAAN,eAAmBoF,UAAU,EAAG,KAAU,MAD7C,OAEGnE,QAFH,IAEGA,OAFH,EAEGA,EAAMjB,eAGdqF,aAAc,SAACpE,GAAD,OACZ,oBAAIiB,UAAU,eAAd,UACG,OAACjB,QAAD,IAACA,OAAD,EAACA,EAAMoE,cAAqBC,IAA4B,KAAjB,OAAJrE,QAAI,IAAJA,OAAA,EAAAA,EAAMoE,eAAqBE,OAAO,cAA/C,OAG3BC,SAAU,SAACvE,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAKuE,YACtEC,MAAO,SAACxE,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAKwE,SACnEC,QAAS,SAACzE,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAKyE,WACrEC,KAAM,SAAC1E,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAK0E,QAClEC,cAAe,SAAC3E,GAAD,OACb,oBAAIiB,UAAU,eAAd,UACG,OAACjB,QAAD,IAACA,OAAD,EAACA,EAAM2E,eAAsBN,IAA6B,KAAlB,OAAJrE,QAAI,IAAJA,OAAA,EAAAA,EAAM2E,gBAAsBL,OAAO,cAAhD,OAG5BhH,OAAQ,SAAC0C,GAAD,OAAyB,oBAAIiB,UAAU,eAAd,SAA8BjB,EAAK1C,UACpEsH,IAAK,SAAC5E,GACJ,IAAKA,EAAK4E,IAAK,OAAO,oBAAI3D,UAAU,eAAd,eACtB,IAAM4D,EAAO7E,EAAK4E,IAAIE,MAAM,KACtBC,EAAWF,EAAKnE,OAAS,EAE/B,OADIqE,IAAUF,EAAK,IAAM,QAEvB,oBAAIlG,MAAOoG,EAAW/E,EAAK4E,IAAM,GAAI3D,UAAU,eAA/C,SACG4D,EAAKG,MAAM,EAAG,GAAGjF,KAAI,SAACkF,GAAD,OACpB,8BAAMA,UAKdC,OAAQ,SAAClF,GAAD,OACN,oBAAIiB,UAAU,eAAd,SACE,cAAC,IAAD,CACE0B,MAAM,UACNwC,QAAQ,UACRC,MAAM,SACNvC,KAAK,KACLnB,MAAO,CACL2D,YAAa,IAEf9C,QAAS,kBAAMnE,EAAoB,CAAEH,MAAM,EAAMpB,GAAImD,EAAKnD,GAAIqB,KAAM8B,EAAK9B,QAR3E,SAUE,mBAAG+C,UAAU,mBAAb,yBAOXqE,YAAWlI,EAAOH,WAAYG,EAAOD,MApX3B,SAACuC,GACdtC,EAAOD,OAASuC,GAClBR,GAAU1B,EAAYkC,KAkXsCtC,EAAOJ","file":"static/js/78.e062333d.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, Prompt, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { CDataTable, CButton, CSpinner } from '@coreui/react';\nimport { useTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport { ConfirmPopup, Search, SelectLoadmore } from '../../../components';\nimport config, { listStatus } from '../../../config';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { useDispatch } from 'react-redux';\nimport { addNo } from '../../../utils';\nimport { loadingSmall, pagination } from '../../../extensions';\n\nconst fields = [\n  { key: 'no', _style: { width: '4%' } },\n  { key: 'name', label: 'Title', _style: { width: 160 } },\n  { key: 'description', _style: { width: '24%' } },\n  { key: 'created_date', _style: { width: '8%' } },\n  { key: 'modified_date', label: 'Last modified', _style: { width: '8%' } },\n  { key: 'uploader', _style: { width: '10%' } },\n  { key: 'tag', _style: { width: '5%' } },\n  { key: 'views', _style: { width: '5%' } },\n  { key: 'comment', _style: { width: '5%' } },\n  { key: 'like', _style: { width: '5%' } },\n  { key: 'status', _style: { width: '8%' } },\n  { key: 'action', _style: { width: '10%' } },\n];\n\ntype VideoDataType = {\n  no: number;\n  id: string;\n  name: string;\n  description: string;\n  status: string;\n  created_date: number;\n  modified_date: number;\n  tag: string;\n  uploader: string;\n  views: number;\n  comment: number;\n  like: number;\n};\n\ntype CategoryDataType = {\n  data: VideoDataType[];\n  total: number;\n  totalPages: number;\n  loading: boolean;\n  page: number;\n};\n\nconst pageSize: number = 10;\n\nconst CategoryDetail: React.FC<RouteComponentProps> = (props) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: any) => dispatch(callApiAction(payload, callback));\n  const history = useHistory();\n\n  const params: any = props.match?.params;\n  const categoryId = params.id;\n\n  const [videos, setVideos] = useState<CategoryDataType>({\n    data: [],\n    total: 0,\n    totalPages: 0,\n    loading: true,\n    page: 1,\n  });\n  const [status, setStatus] = useState<any>(null);\n  const [searchText, setSearchText] = useState('');\n\n  const [searchUploaderText, setSearchUploaderText] = useState('');\n  const [uploaders, setUploaders] = useState<any>({ data: [], loading: true, full: false, page: 1 });\n  const [selectedUploader, setSelectedUploader] = useState<any>(null);\n\n  const [popupDeleteVideo, setPopupDeleteVideo] = useState({ show: false, id: '', name: '' });\n\n  const pageChange = (newPage: number) => {\n    if (videos.page !== newPage) {\n      getVideos(searchText, newPage);\n    }\n  };\n\n  useEffect(() => {\n    callApi({ method: 'get', api: `/api/v1/admin/categories/${categoryId}` }, ({ status, data }: any) => {\n      if (status === SUCCESS) {\n        setCategoryInfo({ loading: false, ...data });\n        setTitle({ ...title, editing: false, value: data.title });\n        setDescription({ ...description, editing: false, value: data.description });\n      } else {\n        setCategoryInfo({ ...categoryInfo, loading: false });\n      }\n    });\n    getMobilityUploaders('', 1);\n  }, []);\n\n  useEffect(() => {\n    getVideos(searchText, 1);\n  }, [status, selectedUploader]);\n\n  const [categoryInfo, setCategoryInfo] = useState({ loading: true, title: '', description: '' });\n  const [title, setTitle] = useState({ editing: false, loading: false, value: '' });\n  const [description, setDescription] = useState({ editing: false, loading: false, value: '' });\n\n  useEffect(() => {\n    if (!title.editing) return;\n    titleRef.current.focus();\n  }, [title.editing]);\n\n  useEffect(() => {\n    if (!description.editing) return;\n    descriptionRef.current.focus();\n  }, [description.editing]);\n\n  useEffect(() => {\n    if (!title.editing && !description.editing) return;\n\n    window.onbeforeunload = function () {\n      return true;\n    };\n\n    return () => {\n      window.onbeforeunload = null;\n    };\n  }, [title.editing, description.editing]);\n\n  let noItems = <div />;\n\n  if (!videos.loading) {\n    if (!videos.total) noItems = <div>No videos</div>;\n  }\n\n  const getVideos = (searchText: string, newPage: number) => {\n    setVideos((videos: any) => {\n      return { ...videos, loading: true };\n    });\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getVideos(\n          categoryId,\n          selectedUploader ? selectedUploader.id : '',\n          status ? status.id : '',\n          pageSize,\n          newPage,\n          searchText,\n          '',\n        ),\n      },\n      (response: any) => {\n        const { status, data } = response;\n        if (status === SUCCESS) {\n          setVideos({\n            data: data.video.map((item: any, index: number) => addNo(item, index, newPage)),\n            loading: false,\n            total: data.total,\n            totalPages: Math.ceil(data.total / pageSize),\n            page: newPage,\n          });\n        } else\n          setVideos((videos: any) => {\n            return { ...videos, loading: false };\n          });\n      },\n    );\n  };\n\n  const getMobilityUploaders = (uploaderName: string, page: number) => {\n    callApi(\n      {\n        method: 'get',\n        api: `/api/v1/admin/video/user?page_size=10&page_number=${page}&search_name=${uploaderName}`,\n      },\n      (response: any) => {\n        const { status, data } = response;\n        if (status === SUCCESS) {\n          setUploaders((uploaders: any) => {\n            const newUsers = data.users.map((item: any) => {\n              return { id: item.id, name: item.first_name + ' ' + item.last_name };\n            });\n            const users =\n              page === 1 ? (uploaderName === '' ? [null, ...newUsers] : newUsers) : [...uploaders.data, ...newUsers];\n            return { data: users, loading: false, full: data.users.length < 10, page: page };\n          });\n        }\n      },\n    );\n  };\n\n  const handleSave = (isTitle: boolean) => {\n    isTitle ? setTitle({ ...title, loading: true }) : setDescription({ ...description, loading: true });\n    callApi(\n      {\n        method: 'put',\n        api: `/api/v1/admin/categories/${categoryId}`,\n        body: {\n          title: isTitle ? title.value : categoryInfo.title,\n          description: isTitle ? categoryInfo.description : description.value,\n        },\n      },\n      ({ status }: any) => {\n        if (status === SUCCESS) {\n          if (isTitle) {\n            setTitle({ ...title, editing: false, loading: false });\n            setCategoryInfo((categoryInfo) => {\n              return { ...categoryInfo, title: title.value };\n            });\n          } else {\n            setDescription({ ...description, editing: false, loading: false });\n            setCategoryInfo((categoryInfo) => {\n              return { ...categoryInfo, description: description.value };\n            });\n          }\n        } else {\n          if (isTitle) setTitle({ ...title, loading: false });\n          else setDescription({ ...description, loading: false });\n        }\n      },\n    );\n  };\n  const handleCancelTitle = () => setTitle({ ...title, editing: false, value: categoryInfo.title });\n  const handleCancelDescription = () =>\n    setDescription({ ...description, editing: false, value: categoryInfo.description });\n\n  const handleDeleteVideo = () => {\n    callApi(\n      { method: 'delete', api: `/api/v1/admin/video/${popupDeleteVideo.id}`, loading: true },\n      ({ status }: any) => {\n        if (status === SUCCESS) {\n          getVideos(searchText, 1);\n        }\n      },\n    );\n    setPopupDeleteVideo({ show: false, id: '', name: '' });\n  };\n\n  const titleRef = useRef<any>(null);\n  const descriptionRef = useRef<any>(null);\n\n  return (\n    <div>\n      {(title.editing || description.editing) && <Prompt when={true} message=\"Changes you made may not be saved.\" />}\n      <Link className=\"pl-5 py-2 size-1\" to=\"/admin/mobility/categories\">\n        Category Management\n      </Link>\n      <span className=\"size-0 pl-2\">&gt; Edit Category</span>\n      <div className=\"row p-5\">\n        <ConfirmPopup\n          isVisible={popupDeleteVideo.show}\n          title=\"Delete video\"\n          content={`Are you sure to delete the video ${popupDeleteVideo.name}`}\n          leftButtonText=\"No\"\n          rightButtonText=\"Yes\"\n          leftButtonOnPress={() => setPopupDeleteVideo({ show: false, id: '', name: '' })}\n          rightButtonOnPress={handleDeleteVideo}\n          handleClose={() => setPopupDeleteVideo({ show: false, id: '', name: '' })}\n        />\n        <div className=\"col-md-3 py-5 px-4\">\n          {!categoryInfo.loading ? (\n            <div className=\"pt-3 pr-3\">\n              <div className=\"py-3\">Category</div>\n              <div style={{ position: 'relative' }}>\n                <input\n                  ref={titleRef}\n                  className=\"form-control\"\n                  placeholder=\"Category name\"\n                  disabled={!title.editing || title.loading}\n                  value={title.value}\n                  maxLength={100}\n                  onChange={(e: any) => setTitle({ ...title, value: e.target.value })}\n                />\n                {!title.editing && (\n                  <i\n                    className=\"fa fa-pencil cursor-pointer\"\n                    onClick={() => setTitle({ ...title, editing: true })}\n                    style={{ position: 'absolute', right: 10, top: 12 }}\n                  />\n                )}\n              </div>\n              {title.editing && (\n                <div className=\"pt-3\" style={{ textAlign: 'right', width: '100%' }}>\n                  <CButton style={{ width: 80 }} color=\"secondary\" className=\"mr-3\" onClick={handleCancelTitle}>\n                    Cancel\n                  </CButton>\n                  <CButton\n                    style={{ width: 80 }}\n                    color=\"primary\"\n                    onClick={() => handleSave(true)}\n                    disabled={title.value.trim() === '' || title.loading || title.value === categoryInfo.title}\n                  >\n                    {title.loading ? <CSpinner size=\"sm\" color=\"light\" /> : 'Save'}\n                  </CButton>\n                </div>\n              )}\n              <div className=\"py-3\">Description</div>\n              <div style={{ position: 'relative' }}>\n                <textarea\n                  ref={descriptionRef}\n                  className=\"form-control\"\n                  rows={12}\n                  placeholder=\"Description\"\n                  disabled={!description.editing || description.loading}\n                  value={description.value}\n                  maxLength={1000}\n                  onChange={(e: any) => setDescription({ ...description, value: e.target.value })}\n                />\n                {!description.editing && (\n                  <i\n                    className=\"fa fa-pencil cursor-pointer\"\n                    onClick={() => setDescription({ ...description, editing: true })}\n                    style={{ position: 'absolute', right: 10, top: 12 }}\n                  />\n                )}\n              </div>\n              {description.editing && (\n                <div className=\"pt-3\" style={{ textAlign: 'right', width: '100%' }}>\n                  <CButton style={{ width: 80 }} color=\"secondary\" className=\"mr-3\" onClick={handleCancelDescription}>\n                    Cancel\n                  </CButton>\n                  <CButton\n                    style={{ width: 80 }}\n                    color=\"primary\"\n                    onClick={() => handleSave(false)}\n                    disabled={description.loading || description.value === categoryInfo.description}\n                  >\n                    {description.loading ? <CSpinner size=\"sm\" color=\"light\" /> : 'Save'}\n                  </CButton>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div style={{ height: 300, display: 'flex', alignItems: 'center' }}>{loadingSmall}</div>\n          )}\n        </div>\n        <div className=\"col-md-9\">\n          <div className=\"d-flex align-items-center justify-content-between mt-2 mb-5\">\n            <div className=\"d-flex\">\n              <div style={{ width: 250 }}>\n                <Search\n                  searchName={searchText}\n                  setSearchName={setSearchText}\n                  className=\"mr-3\"\n                  searchEmpty={true}\n                  callbackSearch={(searchName) => getVideos(searchName, 1)}\n                />\n              </div>\n              <div style={{ width: 250 }}>\n                <SelectLoadmore\n                  className=\"mr-3\"\n                  selected={status}\n                  setSelected={setStatus}\n                  defaultValue=\"Select status\"\n                  data={listStatus}\n                  loading={false}\n                  full={true}\n                  value={status ? status.name : ''}\n                />\n              </div>\n              <div style={{ width: 250 }}>\n                <SelectLoadmore\n                  className=\"mr-3\"\n                  selected={selectedUploader}\n                  setSelected={setSelectedUploader}\n                  defaultValue=\"Select uploader\"\n                  value={searchUploaderText}\n                  setValue={setSearchUploaderText}\n                  callbackSearch={getMobilityUploaders}\n                  {...uploaders}\n                  validation={config.validate.valueTypingExpressionsName}\n                  maxLength={50}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{ minHeight: '65vh', textAlign: 'center' }}>\n            <CDataTable\n              items={videos.data}\n              fields={fields}\n              loading={videos.loading}\n              noItemsViewSlot={noItems}\n              hover\n              striped\n              scopedSlots={{\n                no: (item: VideoDataType) => <td className=\"align-middle\">{item.no}</td>,\n                name: (item: VideoDataType) => (\n                  <td className=\"align-middle\" title={item?.name?.length > 30 ? item?.name : ''}>\n                    <span style={{ overflowWrap: 'break-word', display: 'inline-block', width: 150 }}>\n                      {item?.name?.length > 30 ? item?.name?.substring(0, 30 - 3) + '...' : item?.name}\n                    </span>\n                  </td>\n                ),\n                description: (item: VideoDataType) => (\n                  <td\n                    style={{ height: 80 }}\n                    className=\"align-middle\"\n                    title={item?.description?.length > 60 ? item?.description : ''}\n                  >\n                    {item?.description?.length > 60\n                      ? item?.description?.substring(0, 60 - 3) + '...'\n                      : item?.description}\n                  </td>\n                ),\n                created_date: (item: VideoDataType) => (\n                  <td className=\"align-middle\">\n                    {!item?.created_date ? '-' : moment(item?.created_date * 1000).format('DD/MM/YYYY')}\n                  </td>\n                ),\n                uploader: (item: VideoDataType) => <td className=\"align-middle\">{item.uploader}</td>,\n                views: (item: VideoDataType) => <td className=\"align-middle\">{item.views}</td>,\n                comment: (item: VideoDataType) => <td className=\"align-middle\">{item.comment}</td>,\n                like: (item: VideoDataType) => <td className=\"align-middle\">{item.like}</td>,\n                modified_date: (item: { modified_date: any }) => (\n                  <td className=\"align-middle\">\n                    {!item?.modified_date ? '-' : moment(item?.modified_date * 1000).format('DD/MM/YYYY')}\n                  </td>\n                ),\n                status: (item: VideoDataType) => <td className=\"align-middle\">{item.status}</td>,\n                tag: (item: VideoDataType) => {\n                  if (!item.tag) return <td className=\"align-middle\">-</td>;\n                  const tags = item.tag.split(',');\n                  const showMore = tags.length > 2;\n                  if (showMore) tags[1] += ' ...';\n                  return (\n                    <td title={showMore ? item.tag : ''} className=\"align-middle\">\n                      {tags.slice(0, 2).map((i) => (\n                        <div>{i}</div>\n                      ))}\n                    </td>\n                  );\n                },\n                action: (item: VideoDataType) => (\n                  <td className=\"align-middle\">\n                    <CButton\n                      color=\"primary\"\n                      variant=\"outline\"\n                      shape=\"square\"\n                      size=\"sm\"\n                      style={{\n                        marginRight: 10,\n                      }}\n                      onClick={() => setPopupDeleteVideo({ show: true, id: item.id, name: item.name })}\n                    >\n                      <i className=\"fas fa-trash-alt\"> </i>\n                    </CButton>\n                  </td>\n                ),\n              }}\n            />\n          </div>\n          {pagination(videos.totalPages, videos.page, pageChange, videos.total)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryDetail;\n"],"sourceRoot":""}