{"version":3,"sources":["views/admin/newsfeed/ModalCreateArticle.tsx","views/admin/newsfeed/NewsfeedDetail.tsx","views/admin/containers/FieldName.tsx"],"names":["validationSchema","values","Yup","shape","title","trim","required","summary","source","matches","initialValues","image","type","ModalCreateUser","props","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","url","name","setImage","id","setArticles","handleClose","show","page","pageSize","formRef","useRef","fileRef","onUploadImage","e","file","target","files","loadingRequest","api","method","response","status","data","SUCCESS","file_path","link","myHeaders","Headers","append","requestOptions","headers","body","redirect","fetch","then","text","result","loadingSuccess","catch","error","console","log","attention","setAttention","close","current","resetForm","className","size","centered","onClose","closeOnBackdrop","style","color","onClick","dirty","textAlign","display","justifyContent","width","innerRef","enableReinitialize","validate","onSubmit","config","rest","adminCreateNewsfeedArticle","loading","articles","newData","created_date","Date","getTime","slice","map","item","index","no","total","totalPages","Math","ceil","errors","touched","handleChange","handleSubmit","isValid","handleBlur","FieldName","label","placeholder","maxLength","invalid","value","onChange","rows","disabled","onBlur","click","minWidth","hidden","ref","accept","fields","key","_style","defaultModal","NewsfeedDetail","history","useHistory","params","match","categoryId","query","URLSearchParams","location","search","max","Number","get","searchName","setSearchName","fromDate","setFromDate","toDate","setToDate","popupDelete","setPopupDelete","modal","setModal","getArticles","newPage","adminGetNewsfeedArticles","category_name","push","useEffect","noItems","ModalCreateArticle","isVisible","content","leftButtonText","rightButtonText","leftButtonOnPress","rightButtonOnPress","adminDeleteNewsfeedArticle","to","Search","searchEmpty","callbackSearch","maxDate","date","setDate","minDate","length","minHeight","items","noItemsViewSlot","hover","striped","scopedSlots","substring","height","href","moment","format","action","variant","marginRight","pagination","children","marginTop"],"mappings":"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","file":"static/js/70.2b14cca5.chunk.js","sourcesContent":["import React, { useRef, useState } from 'react';\nimport {\n  CModal,\n  CModalHeader,\n  CModalBody,\n  CButton,\n  CForm,\n  CInput,\n  CTextarea,\n  CModalFooter,\n  CInvalidFeedback,\n  CFormGroup,\n} from '@coreui/react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport config from '../../../config';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { useDispatch } from 'react-redux';\nimport { validate } from '../../../utils';\nimport { loadingRequest, loadingSuccess } from '../../../store/loading/actions';\nimport FieldName from '../containers/FieldName';\n\nconst validationSchema = function (values: any) {\n  return Yup.object().shape({\n    title: Yup.string().trim().required(''),\n    summary: Yup.string().trim().required(''),\n    source: Yup.string()\n      .trim()\n      .required('')\n      .matches(\n        /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/,\n        'URL is invalid',\n      ),\n  });\n};\n\ninterface Props {\n  id: string;\n  name: string;\n  setArticles: any;\n  handleClose: () => void;\n  show: boolean;\n  page: number;\n  pageSize: number;\n}\n\nconst initialValues = {\n  title: '',\n  summary: '',\n  source: '',\n  image: '',\n  type: 'text',\n};\n\nconst isValidURL = (str: string) => {\n  const res = str.match(\n    /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g,\n  );\n  return res !== null;\n};\n\nconst ModalCreateUser: React.FC<Props> = (props) => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [image, setImage] = useState({ url: '', name: '' });\n\n  const { id, name, setArticles, handleClose, show, page, pageSize } = props;\n  const formRef = useRef<any>(null);\n\n  const onSubmit = (values: any) => {\n    const body = {\n      title: values.title.trim(),\n      summary: values.summary.trim(),\n      source: values.source.trim(),\n      image: image.url,\n      type: values.type,\n    };\n    callApi(\n      {\n        method: 'post',\n        api: config.rest.adminCreateNewsfeedArticle(id),\n        body: body,\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setArticles((articles: any) => {\n            const newData = [{ ...body, created_date: new Date().getTime() / 1000 }, ...articles.data]\n              .slice(0, pageSize)\n              .map((item: any, index: number) => {\n                return { ...item, no: index + 1 + pageSize * (page - 1) };\n              });\n            return {\n              ...articles,\n              data: newData,\n              total: articles.total + 1,\n              totalPages: Math.ceil((articles.total + 1) / pageSize),\n              loading: false,\n            };\n          });\n          close();\n        }\n      },\n    );\n  };\n\n  const fileRef = useRef<any>(null);\n\n  const onUploadImage = (e: any) => {\n    let file = e.target.files[0];\n    if (!file) return;\n    dispatch(loadingRequest());\n    callApi(\n      {\n        api: `/api/v1/upload/image-article?file_name=${file.name}`,\n        method: 'get',\n      },\n      (response: any) => {\n        const { status, data } = response;\n        if (status === SUCCESS) {\n          const url = data.file_path.link;\n          const myHeaders = new Headers();\n          myHeaders.append('x-amz-acl', 'public-read');\n          const requestOptions: any = {\n            method: 'PUT',\n            headers: myHeaders,\n            body: file,\n            redirect: 'follow',\n          };\n          fetch(data.link, requestOptions)\n            .then((response) => response.text())\n            .then((result) => {\n              setImage({ url, name: file.name });\n              dispatch(loadingSuccess());\n            })\n            .catch((error) => {\n              console.log(error);\n              dispatch(loadingSuccess());\n            });\n        } else {\n          dispatch(loadingSuccess());\n        }\n      },\n    );\n  };\n\n  const [attention, setAttention] = useState(false);\n\n  const close = () => {\n    formRef.current.resetForm();\n    setImage({ url: '', name: '' });\n    setAttention(false);\n    handleClose();\n  };\n\n  const showAttention = () => {\n    if (!formRef.current.dirty && !image.name) {\n      close();\n      return;\n    }\n    setAttention(true);\n  };\n\n  return (\n    <div className=\"flex-row align-items-center\">\n      <CModal size=\"lg\" centered show={show} onClose={handleClose} closeOnBackdrop={false}>\n        <CModalHeader>\n          Create new article\n          <i className=\"fa fa-close cursor-pointer\" style={{ color: 'gray' }} onClick={showAttention} />\n        </CModalHeader>\n        <CModalBody>\n          <CModal size=\"sm\" show={attention} centered closeOnBackdrop={false}>\n            <CModalBody style={{ textAlign: 'center' }}>Are you sure you want to discard your changes?</CModalBody>\n            <CModalFooter style={{ display: 'flex', justifyContent: 'space-around' }}>\n              <CButton style={{ width: 120 }} color=\"danger\" onClick={close}>\n                Discard\n              </CButton>\n              <CButton style={{ width: 120 }} color=\"primary\" onClick={() => setAttention(false)}>\n                Keep editing\n              </CButton>\n            </CModalFooter>\n          </CModal>\n          <Formik\n            innerRef={formRef}\n            enableReinitialize={true}\n            initialValues={initialValues}\n            validate={validate(validationSchema)}\n            onSubmit={onSubmit}\n          >\n            {({ values, errors, touched, dirty, handleChange, handleSubmit, isValid, handleBlur }) => (\n              <CForm onSubmit={handleSubmit}>\n                <FieldName label=\"Title (*)\">\n                  <CInput\n                    type=\"text\"\n                    placeholder=\"Title (*)\"\n                    maxLength={100}\n                    invalid={values.title.trim() !== '' && touched.title && !!errors.title}\n                    value={values.title}\n                    onChange={handleChange}\n                    name=\"title\"\n                  />\n                </FieldName>\n                <FieldName label=\"Summary (*)\">\n                  <CTextarea\n                    type=\"text\"\n                    placeholder=\"Summary (*)\"\n                    rows={5}\n                    maxLength={1000}\n                    invalid={values.summary.trim() !== '' && touched.summary && !!errors.summary}\n                    value={values.summary}\n                    onChange={handleChange}\n                    name=\"summary\"\n                  />\n                </FieldName>\n                <FieldName label=\"Category\">\n                  <CInput value={name} disabled />\n                </FieldName>\n                <FieldName label=\"URL (*)\">\n                  <CFormGroup className=\"m-0\">\n                    <CInput\n                      placeholder=\"URL (*)\"\n                      invalid={values.source.trim() !== '' && touched.source && !!errors.source}\n                      value={values.source}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      name=\"source\"\n                    />\n                    <CInvalidFeedback className=\"ml-2\">{errors.source}</CInvalidFeedback>\n                  </CFormGroup>\n                </FieldName>\n                <FieldName label=\"Image (*)\">\n                  <div className=\"d-flex align-items-center\">\n                    <CButton\n                      color=\"primary\"\n                      className=\"mr-3\"\n                      onClick={() => fileRef.current.click()}\n                      disabled={!!image.name}\n                      style={{ minWidth: 120 }}\n                    >\n                      Upload image\n                    </CButton>\n                    <div className=\"ellipsis-1-line\">{image.name}</div>\n                    {image.name && (\n                      <i\n                        className=\"fa fa-times-circle ml-2 cursor-pointer\"\n                        style={{ color: 'gray', minWidth: 30 }}\n                        onClick={() => setImage({ url: '', name: '' })}\n                      />\n                    )}\n                  </div>\n                  <input\n                    type=\"file\"\n                    hidden\n                    ref={fileRef}\n                    accept=\"image/x-png,image/gif,image/jpeg\"\n                    onChange={onUploadImage}\n                  />\n                </FieldName>\n                <div style={{ textAlign: 'right' }}>\n                  <CButton color=\"primary\" className=\"px-4\" type=\"submit\" disabled={!(isValid && dirty && image.url)}>\n                    Save\n                  </CButton>\n                </div>\n              </CForm>\n            )}\n          </Formik>\n        </CModalBody>\n      </CModal>\n    </div>\n  );\n};\n\nexport default ModalCreateUser;\n","import React, { useState, useEffect } from 'react';\nimport { Link, RouteComponentProps, useHistory } from 'react-router-dom';\nimport { CDataTable, CPagination, CButton } from '@coreui/react';\nimport moment from 'moment';\nimport { ConfirmPopup, DatePicker } from '../../../components';\nimport Search from '../../../components/search/Search';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport { useDispatch } from 'react-redux';\nimport config from '../../../config';\nimport ModalCreateArticle from './ModalCreateArticle';\nimport { pagination } from '../../../extensions';\n\nconst fields = [\n  { key: 'no', _style: { width: '4%' } },\n  { key: 'title', _style: { width: '24%' } },\n  { key: 'summary', _style: { width: '30%' } },\n  { key: 'source', label: 'Link', _style: { width: '24%' } },\n  { key: 'created_date', _style: { width: '10%' } },\n  { key: 'action', _style: { width: '10%' } },\n];\n\ntype ArticleDataType = {\n  no: number;\n  id: string;\n  title: string;\n  summary: string;\n  type: string;\n  created_date: number;\n  source: string;\n};\n\ntype CategoryDataType = {\n  data: ArticleDataType[];\n  total: number;\n  totalPages: number;\n  loading: boolean;\n  name: string;\n};\n\nconst pageSize = 10;\n\nconst defaultModal = { show: false, id: '', name: '' };\n\nconst NewsfeedDetail: React.FC<RouteComponentProps> = (props) => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: any) => dispatch(callApiAction(payload, callback));\n  const params: any = props.match?.params;\n  const categoryId = params?.id;\n  const query = new URLSearchParams(props.location?.search);\n  const page = Math.max(Number(query.get('page')) || 1, 1);\n  const [searchName, setSearchName] = useState('');\n  const [fromDate, setFromDate] = useState<any>(null);\n  const [toDate, setToDate] = useState<any>(null);\n  const today = new Date();\n\n  const [articles, setArticles] = useState<CategoryDataType>({\n    data: [],\n    total: 0,\n    totalPages: 0,\n    loading: true,\n    name: '',\n  });\n  const [popupDelete, setPopupDelete] = useState({ show: false, id: '' });\n  const [modal, setModal] = useState(defaultModal);\n\n  const getArticles = (newPage: number, searchName: string) => {\n    setArticles({ ...articles, loading: true });\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.adminGetNewsfeedArticles(\n          categoryId,\n          newPage,\n          searchName,\n          fromDate ? fromDate.getTime() / 1000 : null,\n          toDate ? toDate.getTime() / 1000 + 86399 : null,\n        ),\n      },\n      (response: any) => {\n        const { status, data } = response;\n        if (status === SUCCESS) {\n          setArticles({\n            data: data.articles.map((item: any, index: number) => {\n              return { ...item, no: index + 1 + pageSize * (newPage - 1) };\n            }),\n            total: data.total,\n            totalPages: Math.ceil(data.total / pageSize),\n            loading: false,\n            name: data.category_name,\n          });\n          if (page !== newPage) history.push(`?page=${newPage}`);\n        } else {\n          setArticles((articles: CategoryDataType) => {\n            return { ...articles, loading: false };\n          });\n        }\n      },\n    );\n  };\n\n  const handleDelete = (id: string) => {\n    setPopupDelete({ show: false, id: '' });\n    setArticles({ ...articles, loading: true });\n    callApi({ method: 'delete', api: config.rest.adminDeleteNewsfeedArticle(categoryId, id) }, (response: any) => {\n      const { status } = response;\n      if (status === SUCCESS) {\n        getArticles(page, searchName);\n      }\n    });\n  };\n\n  const pageChange = (newPage: number) => {\n    if (page !== newPage) {\n      history.push(`?page=${newPage}`);\n      getArticles(newPage, searchName);\n    }\n  };\n\n  useEffect(() => {\n    getArticles(page, searchName);\n  }, [fromDate, toDate]);\n\n  let noItems = <div />;\n\n  if (!articles.loading) {\n    if (!articles.total) noItems = <div>No items found</div>;\n  }\n\n  return (\n    <div>\n      <ModalCreateArticle\n        {...modal}\n        handleClose={() => setModal(defaultModal)}\n        setArticles={setArticles}\n        page={page}\n        pageSize={pageSize}\n      />\n      <ConfirmPopup\n        isVisible={popupDelete.show}\n        title=\"Delete Article\"\n        content=\"Are you sure to delete this article?\"\n        leftButtonText=\"No\"\n        rightButtonText=\"Yes\"\n        leftButtonOnPress={() => setPopupDelete({ show: false, id: '' })}\n        rightButtonOnPress={() => handleDelete(popupDelete.id)}\n      />\n\n      <Link className=\"pl-5 py-2 size-1\" to=\"/admin/newsfeed\">\n        All Categories\n      </Link>\n      <span className=\"size-0 pl-2\">&gt; {articles.name}</span>\n      <div className=\"px-5 mt-3\">\n        <div className=\"d-flex align-items-center justify-content-between mt-4 mb-5\">\n          <div className=\"d-flex align-items-center\">\n            <Search\n              className=\"mr-5\"\n              searchName={searchName}\n              setSearchName={setSearchName}\n              searchEmpty={true}\n              callbackSearch={(searchName: string) => getArticles(1, searchName)}\n            />\n            <div>From date:</div>\n            <div>\n              <DatePicker maxDate={toDate} date={fromDate} setDate={setFromDate} />\n            </div>\n            <div>To date:</div>\n            <div>\n              <DatePicker minDate={fromDate} date={toDate} setDate={setToDate} />\n            </div>\n          </div>\n          <div className=\"d-flex align-items-center\">\n            <button\n              className=\"btn btn-primary\"\n              onClick={() => setModal({ show: true, id: categoryId, name: articles.name })}\n              disabled={articles.loading && articles.data.length === 0}\n            >\n              Create new article\n            </button>\n          </div>\n        </div>\n        <div style={{ minHeight: '65vh' }}>\n          <CDataTable\n            items={articles.data}\n            fields={fields}\n            loading={articles.loading}\n            noItemsViewSlot={noItems}\n            hover\n            striped\n            scopedSlots={{\n              no: (item: ArticleDataType) => <td className=\"align-middle\">{item.no}</td>,\n              title: (item: ArticleDataType) => (\n                <td className=\"align-middle\" title={item.summary?.length > 80 ? item.summary : ''}>\n                  {item.title.length > 80 ? item.title?.substring(0, 80 - 3) + '...' : item?.title}\n                </td>\n              ),\n              summary: (item: ArticleDataType) => (\n                <td\n                  style={{ height: 100 }}\n                  className=\"align-middle\"\n                  title={item.summary?.length > 80 ? item.summary : ''}\n                >\n                  {item.summary.length > 80 ? item.summary?.substring(0, 80 - 3) + '...' : item?.summary}\n                </td>\n              ),\n              type: (item: ArticleDataType) => <td className=\"align-middle\">{item.type}</td>,\n              source: (item: ArticleDataType) => (\n                <td className=\"align-middle\">\n                  <a target=\"_blank\" href={item.source}>\n                    {item.source.length > 80 ? item.source?.substring(0, 80 - 3) + '...' : item?.source}\n                  </a>\n                </td>\n              ),\n              created_date: (item: ArticleDataType) => (\n                <td className=\"align-middle\">\n                  {!item.created_date ? '-' : moment(item.created_date * 1000).format('DD/MM/YYYY')}\n                </td>\n              ),\n              action: (item: ArticleDataType) => (\n                <td className=\"align-middle\">\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    style={{\n                      marginRight: 10,\n                    }}\n                    onClick={() => setPopupDelete({ show: true, id: item.id })}\n                  >\n                    <i className=\"fas fa-trash-alt\"> </i>\n                  </CButton>\n                </td>\n              ),\n            }}\n          />\n        </div>\n        {pagination(articles.totalPages, page, pageChange, articles.total)}\n      </div>\n    </div>\n  );\n};\n\nexport default NewsfeedDetail;\n","import React from 'react';\n\ninterface Props {\n  className?: string;\n  centered?: boolean;\n  label: string;\n  width?: number;\n  style?: any;\n}\n\nconst FieldName: React.FC<Props> = (props) => {\n  let { className, label, children, width, centered, style } = props;\n  width = width || 110;\n\n  return (\n    <div className={`d-flex mb-3 ${centered ? 'align-items-center' : ''} ${className || ''}`} style={style}>\n      <div style={{ minWidth: width, marginTop: 6 }}>{label}</div>\n      <div style={{ width: `calc(100% - ${width}px)` }}>{children}</div>\n    </div>\n  );\n};\n\nexport default FieldName;\n"],"sourceRoot":""}